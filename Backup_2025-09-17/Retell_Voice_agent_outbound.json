{
  "createdAt": "2025-09-12T13:47:27.463Z",
  "updatedAt": "2025-09-17T02:09:20.000Z",
  "id": "hX2x0PfIuQmHvvrH",
  "name": "Retell_Voice_agent_outbound",
  "active": false,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.retellai.com/v2/create-phone-call",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"from_number\": \"+18142000260\",\n  \"to_number\": \"+91{{ $json.body.phone }}\",\n  \"override_agent_id\": \"agent_408ca9d21a548e7d19cb74c799\",\n  \"metadata\": {},\n  \"retell_llm_dynamic_variables\": {\n    \"name\": \"{{ $json.body.name }}\",\n    \"email_id\": \"{{ $json.body.email }}\"\n  }\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        240,
        0
      ],
      "id": "6b26df4a-f754-43c4-9c7d-ca7343adfc43",
      "name": "HTTP Request",
      "credentials": {
        "httpHeaderAuth": {
          "id": "lKmr7WyjO5KaoW51",
          "name": "Header Auth account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=User Input\nUser Name - {{ $json.body.args.name }}\nPreferred Time -  {{ $json.body.args.preferred_time }}\nEmail ID - {{ $json.body.call.retell_llm_dynamic_variables.email_id }}\n\nCurrent time - {{ $now }}",
        "options": {
          "systemMessage": "=# Overview\nYou are a calendar assistant. Your responsibilities include creating, getting, and deleting events in the user’s calendar.\n\n## Calendar Management Tools:\n\nUse “Create Event” when an event includes a participant.\n\n## Rules\n- Turn the incoming query into an action. Ignore clarification questions, just take action based on the intent you receive.\n- Set Proper Title for Meeting\n\n## Final Notes\nHere is the current date/time: {{ $now }}\nIf a duration for an event isn’t specified, assume it will be one hour."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2,
      "position": [
        128,
        288
      ],
      "id": "2dab06f1-b74b-44cc-afd7-580fa50c4ce1",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list",
          "cachedResultName": "gpt-4.1-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        32,
        528
      ],
      "id": "15bdbc70-3603-4192-ba4a-801b1de2db70",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "HICWIosPabWx10xu",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "calendar": {
          "__rl": true,
          "value": "ccognigenai@gmail.com",
          "mode": "list",
          "cachedResultName": "ccognigenai@gmail.com"
        },
        "start": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Start', ``, 'string') }}",
        "end": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('End', ``, 'string') }}",
        "additionalFields": {
          "attendees": [
            "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('attendees0_Attendees', ``, 'string') }}"
          ],
          "summary": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Summary', ``, 'string') }}"
        }
      },
      "type": "n8n-nodes-base.googleCalendarTool",
      "typeVersion": 1.3,
      "position": [
        304,
        560
      ],
      "id": "5d12af0d-c5e7-4772-ac96-ad562a1864eb",
      "name": "Create Event",
      "credentials": {
        "googleCalendarOAuth2Api": {
          "id": "jYAk7dtz1zuJ5zEd",
          "name": "Google Calendar account"
        }
      }
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1X_NgqG4du6nGBGhDbq2smSXgSatbZvw5lgA_WjjD3TY",
          "mode": "list",
          "cachedResultName": "Angel Clinic Dental Appointment",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1X_NgqG4du6nGBGhDbq2smSXgSatbZvw5lgA_WjjD3TY/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1X_NgqG4du6nGBGhDbq2smSXgSatbZvw5lgA_WjjD3TY/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Name": "={{ $('Retell AI call').item.json.body.args.name }}",
            "Location ": "={{ $('Retell AI call').item.json.body.args.location }}",
            "Concern": "={{ $('Retell AI call').item.json.body.args.concern }}",
            "Preferred Time": "={{ $('Retell AI call').item.json.body.args.preferred_time }}",
            "Email ID": "={{ $('Retell AI call').item.json.body.call.retell_llm_dynamic_variables.email_id }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Name",
              "displayName": "Name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Email ID",
              "displayName": "Email ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Location ",
              "displayName": "Location ",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Concern",
              "displayName": "Concern",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Preferred Time",
              "displayName": "Preferred Time",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.6,
      "position": [
        480,
        288
      ],
      "id": "05c32fc0-5ad7-405d-b008-61b8dd561cca",
      "name": "Update the Entry",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ZG1MR4HwHasbUvb4",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "ad7b26c0-33fb-4968-bc2c-63068d0a4600",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        0,
        0
      ],
      "id": "c5e3310f-3a90-45e6-a985-ee3a1eae242d",
      "name": "Landing Page Call",
      "webhookId": "ad7b26c0-33fb-4968-bc2c-63068d0a4600"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "ee4111fc-0b05-447a-a6b3-0b8b1c0e19c2",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        -96,
        288
      ],
      "id": "71ec932c-508e-4023-a207-24cc79e7e5ac",
      "name": "Retell AI call",
      "webhookId": "ee4111fc-0b05-447a-a6b3-0b8b1c0e19c2",
      "disabled": true
    }
  ],
  "connections": {
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Create Event": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Update the Entry",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Landing Page Call": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Retell AI call": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "pinData": {},
  "versionId": "58294b98-7b3a-42ad-9f5d-3688cf022415",
  "triggerCount": 2,
  "shared": [
    {
      "createdAt": "2025-09-12T13:47:27.467Z",
      "updatedAt": "2025-09-12T13:47:27.467Z",
      "role": "workflow:owner",
      "workflowId": "hX2x0PfIuQmHvvrH",
      "projectId": "nnULjHyqOVknXpmc"
    }
  ],
  "tags": []
}