{
  "createdAt": "2025-09-13T11:56:36.792Z",
  "updatedAt": "2025-09-19T03:21:28.000Z",
  "id": "aB4htaQllkVbfEhI",
  "name": "My workflow",
  "active": false,
  "isArchived": true,
  "nodes": [
    {
      "parameters": {
        "formTitle": "KundliPatrika",
        "formFields": {
          "values": [
            {
              "fieldLabel": " Kundi Doc",
              "fieldType": "file",
              "acceptFileTypes": ".pdf"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.formTrigger",
      "typeVersion": 2.3,
      "position": [
        0,
        0
      ],
      "id": "ee6b8363-371a-467e-a1e8-e8d1ccddbfd7",
      "name": "On form submission",
      "webhookId": "8bbefade-4545-4e32-a1e1-7791f6d4972c"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        112,
        400
      ],
      "id": "58947a70-8612-4826-8605-6ec4059a2f6d",
      "name": "Embeddings OpenAI",
      "credentials": {
        "openAiApi": {
          "id": "HICWIosPabWx10xu",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "dataType": "binary",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "typeVersion": 1.1,
      "position": [
        352,
        368
      ],
      "id": "8e3f1edc-23a1-46bd-856b-472eba0ef31c",
      "name": "Default Data Loader"
    },
    {
      "parameters": {
        "public": true,
        "initialMessages": "üôè Namaste! I am your Jyotish AI Agent. I will help prepare your details for accurate Zodiac Sign and General Predictions. To proceed, I‚Äôll need some birth details from you.",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.3,
      "position": [
        416,
        -432
      ],
      "id": "066dca10-b44e-474d-bbd1-38ff0e1c4eca",
      "name": "When chat message received",
      "webhookId": "0fbe365f-bdde-4130-b01e-1c66724d89a2"
    },
    {
      "parameters": {
        "options": {
          "systemMessage": "=You are \"Jyotish AI Agent,\" a polite and helpful assistant that collects birth details for Zodiac Sign and General Predictions, and prepares the user‚Äôs information for consultation with a Jyotishi.  \n\nYour task:  \n- Collect the following information one by one in order:  \n   1. Full Name  \n   2. Date of Birth (DD/MM/YYYY)  \n   3. Time of Birth (HH:MM AM/PM, include seconds if possible)  \n   4. Place of Birth (City/Town/Village, Country)  \n\nRules:  \n- Ask ONLY for the next missing detail, not for details already provided.  \n- Confirm each answer briefly before moving to the next question.  \n- Do not repeat questions unless the user‚Äôs response is unclear or incomplete.  \n- Once all 4 details are collected, summarize the information back to the user in a clean format and confirm:  \n   \"Here are the details you provided. Please confirm if everything is correct.\"  \n- After confirmation, let the user know:  \n   \"‚úÖ Your details are ready for Jyotish consultation. Would you like me to share your basic zodiac sign and general predictions now, or connect you with a Jyotishi for deeper insights?\"  \n\nTone:  \n- Warm, respectful, and conversational.  \n- Use simple and polite language.  \n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        624,
        -432
      ],
      "id": "23c6cb2c-21b5-4afd-8bc7-b74ad559f1d0",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        496,
        -224
      ],
      "id": "525a505e-ec70-472e-bf2b-d03786f1ba1a",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "HICWIosPabWx10xu",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolDescription": "Query the data",
        "memoryKey": {
          "__rl": true,
          "mode": "list",
          "value": "vector_store_key"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreInMemory",
      "typeVersion": 1.3,
      "position": [
        848,
        -224
      ],
      "id": "2cdfbd8e-c1b7-4da4-82ba-65fb4f0d70f1",
      "name": "Query data tool"
    },
    {
      "parameters": {
        "mode": "insert",
        "memoryKey": {
          "__rl": true,
          "mode": "list",
          "value": "vector_store_key"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreInMemory",
      "typeVersion": 1.3,
      "position": [
        208,
        0
      ],
      "id": "fa89aa4e-03db-4410-9717-f9b09136d870",
      "name": "Insert data into vector db"
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        640,
        -224
      ],
      "id": "98cfee83-257d-45ec-94bc-7412c02b10fe",
      "name": "Simple Memory"
    }
  ],
  "connections": {
    "On form submission": {
      "main": [
        [
          {
            "node": "Insert data into vector db",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI": {
      "ai_embedding": [
        [
          {
            "node": "Insert data into vector db",
            "type": "ai_embedding",
            "index": 0
          },
          {
            "node": "Query data tool",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Default Data Loader": {
      "ai_document": [
        [
          {
            "node": "Insert data into vector db",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "When chat message received": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Query data tool": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "pinData": {},
  "versionId": "c2e65fe7-401c-49f2-ad4b-96f6410677a9",
  "triggerCount": 2,
  "shared": [
    {
      "createdAt": "2025-09-13T11:56:36.804Z",
      "updatedAt": "2025-09-13T11:56:36.804Z",
      "role": "workflow:owner",
      "workflowId": "aB4htaQllkVbfEhI",
      "projectId": "nnULjHyqOVknXpmc"
    }
  ],
  "tags": []
}