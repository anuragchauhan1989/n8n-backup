{
  "createdAt": "2025-10-24T06:45:16.600Z",
  "updatedAt": "2025-10-24T08:30:17.000Z",
  "id": "HtrlnGdyQDgQ4PxM",
  "name": "FitWithPari - Workflow -1",
  "active": false,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "ai-agents/create-profiles",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        -1312,
        272
      ],
      "id": "2c098e6c-018c-446a-864a-a721dc36db71",
      "name": "Webhook",
      "webhookId": "8e7037cf-81cf-463d-b4b6-ce374db5fd03"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "f9d7b8ee-8cf9-478a-a56e-fba4d57fedb4",
              "leftValue": "={{ $json.body.data.form_type }}",
              "rightValue": "onboarding",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -672,
        256
      ],
      "id": "c31d8ac9-3c29-4c68-8c6e-45cd76cc9412",
      "name": "if onboarding"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "89423bc8-2b83-4a38-bf80-95ee2bb34b60",
              "leftValue": "={{ $json.body.data.form_type }}",
              "rightValue": "assessment",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -672,
        416
      ],
      "id": "7d8f6bf7-0ba3-4428-b39d-b073b1ff2410",
      "name": "If assessment"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "64e55d8b-73b5-4ad3-a7a3-dfd7fa9ff7ba",
              "leftValue": "={{ $json.body.data.form_type }}",
              "rightValue": "feedback",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -672,
        576
      ],
      "id": "e673c0e9-1f92-466d-92ff-dad68a79dadf",
      "name": "If feedback"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "e5a36f37-27b3-4c15-94e0-b136cfb135c3",
              "name": "body",
              "value": "={{ $json.body }}",
              "type": "object"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -880,
        256
      ],
      "id": "b82e1a18-417f-454c-b688-29ae69598d7c",
      "name": "Set Body Only"
    },
    {
      "parameters": {
        "jsCode": "// Get the input data\nconst input = $input.first().json;\n\nconsole.log('=== Transform Onboarding - Input ===');\nconsole.log(JSON.stringify(input, null, 2));\n\n// Extract data based on structure\nlet transformedData;\nlet sessionId;\n\nif (input.body?.data) {\n  transformedData = input.body.data;\n  sessionId = input.body.session_id || null;\n} else if (input.data) {\n  transformedData = input.data;\n  sessionId = input.session_id || null;\n} else {\n  transformedData = input;\n  sessionId = null;\n}\n\nconsole.log('=== Transform Onboarding - Output ===');\nconsole.log('Session ID:', sessionId);\nconsole.log(JSON.stringify(transformedData, null, 2));\n\n// Return with session ID for memory\nreturn {\n  json: {\n    sessionId: sessionId,\n    ...transformedData\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -384,
        240
      ],
      "id": "bb768d49-f9c1-4ea0-817e-7311d187536f",
      "name": "Transform Onboarding Form"
    },
    {
      "parameters": {
        "jsCode": "// Get the input data\nconst input = $input.first().json;\n\nconsole.log('=== Transform Assessment - Input ===');\nconsole.log(JSON.stringify(input, null, 2));\n\n// Extract data based on structure\nlet transformedData;\nlet sessionId;\n\nif (input.body?.data) {\n  transformedData = input.body.data;\n  sessionId = input.body.session_id || null;\n} else if (input.data) {\n  transformedData = input.data;\n  sessionId = input.session_id || null;\n} else {\n  transformedData = input;\n  sessionId = null;\n}\n\nconsole.log('=== Transform Assessment - Output ===');\nconsole.log('Session ID:', sessionId);\nconsole.log(JSON.stringify(transformedData, null, 2));\n\n// Return with session ID for memory\nreturn {\n  json: {\n    sessionId: sessionId,\n    ...transformedData\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -384,
        400
      ],
      "id": "93efb322-54a3-4a8f-ba88-bb273d2252c7",
      "name": "Transform Assesment Form"
    },
    {
      "parameters": {
        "jsCode": "// Get the input data\nconst input = $input.first().json;\n\nconsole.log('=== Transform Feedback - Input ===');\nconsole.log(JSON.stringify(input, null, 2));\n\n// Extract data based on structure\nlet transformedData;\nlet sessionId;\n\nif (input.body?.data) {\n  transformedData = input.body.data;\n  sessionId = input.body.session_id || null;\n} else if (input.data) {\n  transformedData = input.data;\n  sessionId = input.session_id || null;\n} else {\n  transformedData = input;\n  sessionId = null;\n}\n\nconsole.log('=== Transform Feedback - Output ===');\nconsole.log('Session ID:', sessionId);\nconsole.log(JSON.stringify(transformedData, null, 2));\n\n// Return with session ID for memory\nreturn {\n  json: {\n    sessionId: sessionId,\n    ...transformedData\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -384,
        560
      ],
      "id": "e3cd2cb4-b3c8-4647-ad2c-7fd904e9a8dd",
      "name": "Transform Feedback Form"
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "{\n  \"error\": \"make sure to send form type\"\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        -384,
        752
      ],
      "id": "89065b64-e7d5-4178-972a-8740fb60e96a",
      "name": "Respond to Webhook"
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $('Transform Onboarding Form').item.json.sessionId }}"
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        304,
        432
      ],
      "id": "d4d101cd-80ed-4d03-916b-507a7785b701",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "0f7201b6-2908-4661-8eed-50e4fdb78119",
              "leftValue": "={{ $json.body }}",
              "rightValue": "",
              "operator": {
                "type": "object",
                "operation": "notEmpty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -1120,
        272
      ],
      "id": "d33a0453-9e5e-4eb7-a5d2-8a38b7c16dde",
      "name": "If"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Analyze the following assessment data and generate a complete profile for database storage.\n\nINPUT DATA:\n{{ JSON.stringify($json, null, 2) }}\n\nExtract the following:\n- student_id from assessment.student_id or assessment.student.id\n- source_assessment_id from assessment.id\n- All test results, scores, and observations\n- Medical concerns from question responses\n- Bilateral comparisons and their interpretations\n- Coach recommendations from the summary section\n\nGenerate a comprehensive profile_json object with:\n- Current timestamp in generated_at\n- A clear summary paragraph\n- Health information (medical concerns, restrictions, vitals if available)\n- Goals inferred from fitness_goal and test results\n- Assessment history with this current assessment\n- Movement capacity analysis based on test results\n- Training preferences (if available in data)\n- Actionable recommendations for the coach\n\nReturn the complete StudentLongProfileForDB JSON object.",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "=Update the system message to instruct the AI to follow the parser schema:\n```\nYou are an expert fitness assessment analyst and CoachPrep profile generator.\n\nYour task is to analyze the provided assessment data and generate a complete StudentLongProfileForDB object that will be stored in the database.\n\nCRITICAL RULES:\n1. You MUST return a valid JSON object that exactly matches the StudentLongProfileForDB schema\n2. The output must include THREE top-level keys:\n   - student_id: Extract from the assessment.student_id or assessment.student.id field\n   - profile_json: A nested object containing all the detailed profile data (health, goals, assessments, etc.)\n   - summary_text: A plain text version of the profile_json.summary field\n   - source_assessment_id: The assessment.id from the input\n\n3. Inside profile_json, you MUST include:\n   - generated_at: Current ISO timestamp\n   - llm_version: \"gpt-4o-long_v1\"\n   - summary: One clear paragraph describing the student's overall status\n   - health: Object with medical_concerns and exercise_restrictions arrays (can be empty but must exist)\n   - All other fields as appropriate based on available data\n\n4. Use numeric values as numbers (not strings): percent_difference should be 42.5 not \"42.5%\"\n5. If data is missing, use null for single values or empty arrays [] for lists\n6. Extract medical concerns and restrictions from question responses and coach notes\n7. Parse bilateral comparisons and include them in assessments with proper interpretation\n8. Generate actionable recommendations in the recommendations object\n\nIMPORTANT: Return ONLY the JSON object. No markdown, no code blocks, no explanatory text."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        224,
        240
      ],
      "id": "81931a00-7035-49ea-b787-80f2536ed0a0",
      "name": "Long Profile Agent",
      "alwaysOutputData": false
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        288,
        896
      ],
      "id": "2a465148-a01b-4157-93b7-c4918921f09e",
      "name": "Simple Memory1"
    },
    {
      "parameters": {
        "tableId": "student_profiles_full"
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        608,
        240
      ],
      "id": "7eea57f9-d5e5-4f6d-ad43-72b710709942",
      "name": "Add Long Profile",
      "credentials": {
        "supabaseApi": {
          "id": "VKoabbJQnegsVFoB",
          "name": "Supabase account"
        }
      }
    },
    {
      "parameters": {
        "tableId": "student_profiles_short"
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        608,
        656
      ],
      "id": "ab455088-be7e-4562-aab5-04e8e2211145",
      "name": "Add Short Profile",
      "credentials": {
        "supabaseApi": {
          "id": "VKoabbJQnegsVFoB",
          "name": "Supabase account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Create a quick-reference profile for coaches based on this assessment data.\n\nINPUT DATA:\n{{ JSON.stringify($json, null, 2) }}\n\nExtract the student_id from: assessment.student_id or assessment.student.id\n\nDetermine context_key:\n- Use \"strength\" if assessment focuses on strength training\n- Use \"mobility\" if assessment focuses on flexibility/ROM\n- Use \"balance\" if assessment focuses on stability\n- Use \"general\" as default\n\nAnalyze and categorize information:\n\nMUST KNOW (Safety & Restrictions):\n- Any pain or discomfort mentioned (with location and severity)\n- Exercise restrictions or modifications needed\n- Medical concerns that affect training\n\nSHOULD KNOW (Performance Context):\n- Significant bilateral imbalances (include specific numbers and percentages)\n- Mobility or flexibility limitations with measurements\n- Movement quality issues and compensations observed\n\nNICE TO KNOW (Personalization):\n- Student's fitness goals\n- Areas of strength demonstrated\n- Training preferences if mentioned\n\nCLASS ACTIONABLE TIPS:\n- Specific coaching cues for this student\n- Modifications to suggest (with urgency level)\n- Areas to monitor during class\n\nCreate a quick_summary that a coach can read in 10 seconds before class.\n\nSet summary_text to the same value as short_profile.quick_summary.\n\nReturn the complete StudentShortProfileForDB JSON object.",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "=You are an expert fitness coach profile generator creating quick-reference profiles for coaches.\n\nYour task is to analyze the provided assessment data and generate a StudentShortProfileForDB object optimized for coaches who need quick context before a class.\n\nCRITICAL RULES:\n1. You MUST return a valid JSON object that exactly matches the StudentShortProfileForDB schema\n2. The output must include FOUR top-level keys:\n   - student_id: Extract from the assessment.student_id or assessment.student.id field\n   - context_key: Determine from the assessment type or use \"general\"\n   - short_profile: A nested object with all required fields\n   - summary_text: A plain text summary extracted from short_profile.quick_summary\n\n3. Inside short_profile, you MUST include these REQUIRED fields:\n   - generated_at: Current ISO timestamp (use current date/time)\n   - llm_version: \"gpt-4o-short_v1\"\n   - context: Same value as the top-level context_key\n   - must_know: Array of safety-critical items (injuries, restrictions, pain levels) - MAX 5 items\n   - should_know: Array of important context (balance deficits, mobility limitations) - MAX 5 items\n   - nice_to_know: Array of preferences, strengths, goals - MAX 3 items\n\n4. Optional fields in short_profile:\n   - class_actionable_tips: Array of objects with tip, urgency, and rationale\n   - quick_summary: 1-2 line summary for roster UI\n   - score_confidence: Number between 0 and 1\n\n5. Use clear, concise bullet points in arrays\n6. Include specific metrics when relevant (e.g., \"Left leg balance: 23s vs Right: 40s\")\n7. For class_actionable_tips, mark urgency as: \"high\" = safety risk, \"medium\" = modification needed, \"low\" = optimization\n\nIMPORTANT: Return ONLY the JSON object. No markdown, no code blocks, no explanatory text. The response must start with { and end with }."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        224,
        640
      ],
      "id": "792d8135-00bc-4c57-b07f-e3fadad73f4d",
      "name": "Student Short Profile",
      "alwaysOutputData": false
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"title\": \"StudentLongProfileForDB\",\n  \"type\": \"object\",\n  \"additionalProperties\": false,\n  \"required\": [\"student_id\", \"profile_json\", \"summary_text\"],\n  \"properties\": {\n    \"student_id\": {\n      \"type\": \"string\",\n      \"format\": \"uuid\",\n      \"description\": \"UUID of the student\"\n    },\n    \"profile_json\": {\n      \"type\": \"object\",\n      \"description\": \"Complete fitness profile data\",\n      \"required\": [\"generated_at\", \"summary\", \"health\"],\n      \"properties\": {\n        \"generated_at\": {\n          \"type\": \"string\",\n          \"format\": \"date-time\"\n        },\n        \"llm_version\": {\n          \"type\": \"string\"\n        },\n        \"summary\": {\n          \"type\": \"string\",\n          \"description\": \"One-paragraph overview of student's status\"\n        },\n        \"goals\": {\n          \"type\": \"array\",\n          \"items\": {\n            \"type\": \"object\",\n            \"required\": [\"type\", \"target\", \"timeline\"],\n            \"properties\": {\n              \"type\": {\"type\": \"string\"},\n              \"target\": {\"type\": \"string\"},\n              \"metric\": {\"type\": \"string\"},\n              \"baseline\": {\"type\": [\"string\", \"number\", \"null\"]},\n              \"timeline\": {\"type\": \"string\"},\n              \"priority\": {\"type\": \"integer\", \"minimum\": 1, \"maximum\": 5}\n            }\n          }\n        },\n        \"health\": {\n          \"type\": \"object\",\n          \"required\": [\"medical_concerns\", \"exercise_restrictions\"],\n          \"properties\": {\n            \"medical_concerns\": {\n              \"type\": \"array\",\n              \"items\": {\"type\": \"string\"}\n            },\n            \"exercise_restrictions\": {\n              \"type\": \"array\",\n              \"items\": {\"type\": \"string\"}\n            },\n            \"medications\": {\n              \"type\": \"array\",\n              \"items\": {\"type\": \"string\"}\n            },\n            \"allergies\": {\n              \"type\": \"array\",\n              \"items\": {\"type\": \"string\"}\n            },\n            \"vitals\": {\n              \"type\": \"object\",\n              \"properties\": {\n                \"height_cm\": {\"type\": [\"number\", \"null\"]},\n                \"weight_kg\": {\"type\": [\"number\", \"null\"]},\n                \"bmi\": {\"type\": [\"number\", \"null\"]},\n                \"resting_heart_rate_bpm\": {\"type\": [\"number\", \"null\"]},\n                \"blood_pressure\": {\"type\": [\"string\", \"null\"]}\n              }\n            }\n          }\n        },\n        \"assessments\": {\n          \"type\": \"array\",\n          \"items\": {\n            \"type\": \"object\",\n            \"required\": [\"assessment_id\", \"date\", \"type\"],\n            \"properties\": {\n              \"assessment_id\": {\"type\": [\"string\", \"null\"]},\n              \"date\": {\"type\": \"string\", \"format\": \"date-time\"},\n              \"type\": {\"type\": \"string\"},\n              \"summary\": {\"type\": \"string\"},\n              \"scores\": {\"type\": \"object\"},\n              \"details\": {\"type\": \"object\"}\n            }\n          }\n        },\n        \"movement_and_capacity\": {\n          \"type\": \"object\",\n          \"properties\": {\n            \"strength\": {\"type\": \"string\"},\n            \"mobility\": {\"type\": \"string\"},\n            \"flexibility\": {\"type\": \"string\"},\n            \"posture_notes\": {\"type\": \"string\"},\n            \"injury_history_summary\": {\"type\": \"string\"}\n          }\n        },\n        \"progress_milestones\": {\n          \"type\": \"array\",\n          \"items\": {\n            \"type\": \"object\",\n            \"required\": [\"date\", \"note\"],\n            \"properties\": {\n              \"date\": {\"type\": \"string\", \"format\": \"date-time\"},\n              \"note\": {\"type\": \"string\"},\n              \"source\": {\"type\": \"string\"},\n              \"related_assessment_id\": {\"type\": [\"string\", \"null\"]}\n            }\n          }\n        },\n        \"coach_feedback\": {\n          \"type\": \"array\",\n          \"items\": {\n            \"type\": \"object\",\n            \"required\": [\"date\", \"coach_id\", \"note\"],\n            \"properties\": {\n              \"date\": {\"type\": \"string\", \"format\": \"date-time\"},\n              \"coach_id\": {\"type\": [\"string\", \"null\"]},\n              \"note\": {\"type\": \"string\"},\n              \"action_items\": {\n                \"type\": \"array\",\n                \"items\": {\"type\": \"string\"}\n              }\n            }\n          }\n        },\n        \"attendance\": {\n          \"type\": \"array\",\n          \"items\": {\n            \"type\": \"object\",\n            \"required\": [\"date\", \"status\"],\n            \"properties\": {\n              \"date\": {\"type\": \"string\", \"format\": \"date-time\"},\n              \"status\": {\"type\": \"string\", \"enum\": [\"present\", \"absent\", \"late\", \"excused\"]},\n              \"notes\": {\"type\": \"string\"}\n            }\n          }\n        },\n        \"engagement_metrics\": {\n          \"type\": \"object\",\n          \"properties\": {\n            \"weekly_sessions_attended\": {\"type\": [\"integer\", \"null\"]},\n            \"avg_session_rating\": {\"type\": [\"number\", \"null\"]},\n            \"homework_completion_pct\": {\"type\": [\"number\", \"null\"]}\n          }\n        },\n        \"training_preferences\": {\n          \"type\": \"object\",\n          \"properties\": {\n            \"preferred_times\": {\"type\": \"array\", \"items\": {\"type\": \"string\"}},\n            \"equipment_available\": {\"type\": \"array\", \"items\": {\"type\": \"string\"}},\n            \"exercise_likes\": {\"type\": \"array\", \"items\": {\"type\": \"string\"}},\n            \"exercise_dislikes\": {\"type\": \"array\", \"items\": {\"type\": \"string\"}}\n          }\n        },\n        \"recommendations\": {\n          \"type\": \"object\",\n          \"properties\": {\n            \"short_term_plan\": {\"type\": \"string\"},\n            \"long_term_plan\": {\"type\": \"string\"},\n            \"modifications\": {\"type\": \"array\", \"items\": {\"type\": \"string\"}},\n            \"priority_actions\": {\"type\": \"array\", \"items\": {\"type\": \"string\"}}\n          }\n        }\n      }\n    },\n    \"summary_text\": {\n      \"type\": \"string\",\n      \"description\": \"Plain text summary extracted from profile_json.summary\"\n    },\n    \"source_assessment_id\": {\n      \"type\": [\"string\", \"null\"],\n      \"format\": \"uuid\",\n      \"description\": \"ID of the source assessment\"\n    }\n  }\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        448,
        432
      ],
      "id": "ab2b597c-ccd3-45b1-ac77-6142b2f52347",
      "name": "Structured Output Parser"
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"title\": \"StudentShortProfileForDB\",\n  \"type\": \"object\",\n  \"additionalProperties\": false,\n  \"required\": [\"student_id\", \"context_key\", \"short_profile\", \"summary_text\"],\n  \"properties\": {\n    \"student_id\": {\n      \"type\": \"string\",\n      \"format\": \"uuid\",\n      \"description\": \"UUID of the student\"\n    },\n    \"context_key\": {\n      \"type\": \"string\",\n      \"description\": \"Context this profile is for (e.g., 'strength', 'yoga', 'mobility', 'general')\"\n    },\n    \"short_profile\": {\n      \"type\": \"object\",\n      \"description\": \"Concise profile data for quick coach reference\",\n      \"required\": [\"generated_at\", \"llm_version\", \"context\", \"must_know\", \"should_know\", \"nice_to_know\"],\n      \"additionalProperties\": false,\n      \"properties\": {\n        \"generated_at\": {\n          \"type\": \"string\",\n          \"format\": \"date-time\",\n          \"description\": \"ISO timestamp when profile was generated\"\n        },\n        \"llm_version\": {\n          \"type\": \"string\",\n          \"description\": \"Version of LLM used to generate profile\"\n        },\n        \"context\": {\n          \"type\": \"string\",\n          \"description\": \"Context key this profile addresses (matches context_key)\"\n        },\n        \"must_know\": {\n          \"type\": \"array\",\n          \"items\": {\"type\": \"string\"},\n          \"description\": \"Critical information coaches must know (safety, restrictions)\"\n        },\n        \"should_know\": {\n          \"type\": \"array\",\n          \"items\": {\"type\": \"string\"},\n          \"description\": \"Important but not critical information\"\n        },\n        \"nice_to_know\": {\n          \"type\": \"array\",\n          \"items\": {\"type\": \"string\"},\n          \"description\": \"Optional info for personalization\"\n        },\n        \"class_actionable_tips\": {\n          \"type\": \"array\",\n          \"items\": {\n            \"type\": \"object\",\n            \"required\": [\"tip\", \"urgency\"],\n            \"additionalProperties\": false,\n            \"properties\": {\n              \"tip\": {\n                \"type\": \"string\",\n                \"description\": \"Specific coaching cue or action\"\n              },\n              \"urgency\": {\n                \"type\": \"string\",\n                \"enum\": [\"high\", \"medium\", \"low\"],\n                \"description\": \"Priority level of this tip\"\n              },\n              \"rationale\": {\n                \"type\": \"string\",\n                \"description\": \"Explanation of why this tip is important\"\n              }\n            }\n          }\n        },\n        \"quick_summary\": {\n          \"type\": \"string\",\n          \"description\": \"1-2 line summary for roster UI\"\n        },\n        \"score_confidence\": {\n          \"type\": [\"number\", \"null\"],\n          \"minimum\": 0,\n          \"maximum\": 1,\n          \"description\": \"Confidence score for the assessment\"\n        }\n      }\n    },\n    \"summary_text\": {\n      \"type\": \"string\",\n      \"description\": \"Plain text summary from short_profile.quick_summary\"\n    }\n  }\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        448,
        896
      ],
      "id": "25334d61-463c-4626-a8a8-1d8c6aa5ace2",
      "name": "Structured Output Parser1"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        144,
        432
      ],
      "id": "6cab2026-bb6e-440e-8f00-5b5939a660bc",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "HICWIosPabWx10xu",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        128,
        896
      ],
      "id": "e0226e74-8b91-4380-9abb-c44dce3d10b4",
      "name": "OpenAI Chat Model1",
      "credentials": {
        "openAiApi": {
          "id": "HICWIosPabWx10xu",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Extract only required fields for AI agent\nconst input = $input.first().json;\n\n// Build streamlined data object\nconst aiInput = {\n  sessionId: input.sessionId || input.session_id,\n  student_id: input.assessment?.student?.id || input.student_id,\n  source_assessment_id: input.assessment?.id,\n  \n  student_info: {\n    full_name: input.assessment?.student?.full_name,\n    email: input.assessment?.student?.email,\n    date_of_birth: input.assessment?.student?.date_of_birth,\n    gender: input.assessment?.student?.gender,\n    fitness_goal: input.assessment?.student?.fitness_goal\n  },\n  \n  assessment_metadata: {\n    completed_at: input.assessment?.completed_at,\n    created_at: input.assessment?.created_at,\n    status: input.assessment?.status\n  },\n  \n  // Test results with essential fields only\n  test_results: input.test_results?.map(test => ({\n    id: test.id,\n    test_name: test.test_name,\n    test_category: test.test_category,\n    completed_at: test.completed_at,\n    \n    // Only include answered questions\n    questions: test.questions?.filter(q => q.response).map(q => ({\n      question_text: q.question_text,\n      question_type: q.question_type,\n      response: q.response.response,\n      help_text: q.help_text,\n      metadata: q.metadata\n    })),\n    \n    // Exclude heavy media files\n    media_count: test.media_files?.length || 0\n  })),\n  \n  // Summary with bilateral comparisons\n  summary: {\n    total_tests: input.summary?.total_tests,\n    completed_tests: input.summary?.completed_tests,\n    bilateral_comparisons: input.summary?.bilateral_comparisons,\n    key_findings: input.summary?.key_findings,\n    recommendations: input.summary?.recommendations\n  }\n};\n\nconsole.log('=== AI Agent Input ===');\nconsole.log('Session ID:', aiInput.sessionId);\nconsole.log('Student ID:', aiInput.student_id);\nconsole.log('Assessment ID:', aiInput.source_assessment_id);\nconsole.log(JSON.stringify(aiInput, null, 2));\n\nreturn {\n  json: aiInput\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -176,
        240
      ],
      "id": "22d7f575-c736-49b0-a6ab-41c6e717c89c",
      "name": "Code in JavaScript"
    }
  ],
  "connections": {
    "Webhook": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "if onboarding": {
      "main": [
        [
          {
            "node": "Transform Onboarding Form",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If assessment": {
      "main": [
        [
          {
            "node": "Transform Assesment Form",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If feedback": {
      "main": [
        [
          {
            "node": "Transform Feedback Form",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Body Only": {
      "main": [
        [
          {
            "node": "if onboarding",
            "type": "main",
            "index": 0
          },
          {
            "node": "If assessment",
            "type": "main",
            "index": 0
          },
          {
            "node": "If feedback",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Transform Onboarding Form": {
      "main": [
        [
          {
            "node": "Student Short Profile",
            "type": "main",
            "index": 0
          },
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Transform Assesment Form": {
      "main": [
        [
          {
            "node": "Long Profile Agent",
            "type": "main",
            "index": 0
          },
          {
            "node": "Student Short Profile",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Transform Feedback Form": {
      "main": [
        [
          {
            "node": "Long Profile Agent",
            "type": "main",
            "index": 0
          },
          {
            "node": "Student Short Profile",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "Long Profile Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "Set Body Only",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Long Profile Agent": {
      "main": [
        [
          {
            "node": "Add Long Profile",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory1": {
      "ai_memory": [
        [
          {
            "node": "Student Short Profile",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Student Short Profile": {
      "main": [
        [
          {
            "node": "Add Short Profile",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "Long Profile Agent",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser1": {
      "ai_outputParser": [
        [
          {
            "node": "Student Short Profile",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Long Profile Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "Student Short Profile",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "Long Profile Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "pinData": {
    "Webhook": [
      {
        "json": {
          "headers": {
            "host": "fitwithparirp.app.n8n.cloud",
            "user-agent": "PostmanRuntime/7.48.0",
            "content-length": "39249",
            "accept": "*/*",
            "accept-encoding": "gzip, br",
            "cdn-loop": "cloudflare; loops=1; subreqs=1",
            "cf-connecting-ip": "2401:4900:1c5b:487a:840c:3c68:13bd:8142",
            "cf-ew-via": "15",
            "cf-ipcountry": "IN",
            "cf-ray": "99373234c139a6ed-DEL",
            "cf-visitor": "{\"scheme\":\"https\"}",
            "cf-worker": "n8n.cloud",
            "content-type": "application/json",
            "postman-token": "f095cf8b-b77f-4150-ace9-12a663b37499",
            "x-forwarded-for": "2401:4900:1c5b:487a:840c:3c68:13bd:8142, 162.158.142.66",
            "x-forwarded-host": "fitwithparirp.app.n8n.cloud",
            "x-forwarded-port": "443",
            "x-forwarded-proto": "https",
            "x-forwarded-server": "traefik-prod-users-gwc-9-7bb7d4c57c-5brtv",
            "x-is-trusted": "yes",
            "x-real-ip": "2401:4900:1c5b:487a:840c:3c68:13bd:8142"
          },
          "params": {},
          "query": {},
          "body": {
            "success": true,
            "session_id": "123432",
            "data": {
              "form_type": "onboarding",
              "assessment": {
                "id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
                "session_id": "c7d8e9f0-1a2b-3c4d-5e6f-7890abcdef12",
                "student_id": "550e8400-e29b-41d4-a716-446655440000",
                "coach_id": "660e8400-e29b-41d4-a716-446655440001",
                "status": "completed",
                "created_at": "2025-10-23T09:00:00Z",
                "updated_at": "2025-10-23T09:45:00Z",
                "completed_at": "2025-10-23T09:45:00Z",
                "student": {
                  "id": "550e8400-e29b-41d4-a716-446655440000",
                  "full_name": "Sarah Johnson",
                  "email": "sarah.johnson@example.com",
                  "avatar_url": "https://example.com/avatars/sarah.jpg",
                  "date_of_birth": "1992-05-15",
                  "gender": "female",
                  "fitness_goal": "Improve overall strength and mobility"
                },
                "coach": {
                  "id": "660e8400-e29b-41d4-a716-446655440001",
                  "full_name": "Dr. Mike Martinez",
                  "email": "mike.martinez@fitwithpari.com",
                  "avatar_url": "https://example.com/avatars/mike.jpg",
                  "bio": "Certified Strength & Conditioning Specialist with 10 years of experience",
                  "specialties": [
                    "Movement Assessment",
                    "Corrective Exercise",
                    "Sports Performance"
                  ]
                }
              },
              "test_results": [
                {
                  "id": "tr-001-overhead-squat",
                  "assessment_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
                  "test_id": "test-overhead-squat",
                  "test_name": "Overhead Squat Assessment",
                  "test_description": "Evaluates overall body mechanics, mobility, and stability during a fundamental movement pattern",
                  "test_category": "movement_screening",
                  "display_order": 1,
                  "status": "completed",
                  "completed_at": "2025-10-23T09:15:00Z",
                  "created_at": "2025-10-23T09:10:00Z",
                  "updated_at": "2025-10-23T09:15:00Z",
                  "metadata": {
                    "duration_seconds": 300,
                    "video_count": 2,
                    "repetitions_performed": 5,
                    "test_protocol": "NASM Overhead Squat Assessment"
                  },
                  "questions": [
                    {
                      "id": "q-os-001",
                      "test_id": "test-overhead-squat",
                      "question_text": "Does the client's feet turn out during the movement?",
                      "question_type": "binary",
                      "is_required": true,
                      "display_order": 1,
                      "help_text": "Observe if feet externally rotate (point outward) during the squat",
                      "validation_rules": {
                        "required": true
                      },
                      "metadata": {
                        "body_region": "lower_body",
                        "movement_phase": "descent",
                        "compensation_pattern": "foot_pronation"
                      },
                      "response": {
                        "id": "resp-os-001",
                        "question_id": "q-os-001",
                        "test_result_id": "tr-001-overhead-squat",
                        "response": true,
                        "created_at": "2025-10-23T09:12:00Z",
                        "updated_at": "2025-10-23T09:12:00Z"
                      }
                    },
                    {
                      "id": "q-os-002",
                      "test_id": "test-overhead-squat",
                      "question_text": "Does the client's knees move inward (valgus collapse)?",
                      "question_type": "ternary",
                      "is_required": true,
                      "display_order": 2,
                      "help_text": "Check for medial knee displacement during squat",
                      "options": [
                        {
                          "value": "none",
                          "label": "No valgus",
                          "score": 0
                        },
                        {
                          "value": "mild",
                          "label": "Mild valgus",
                          "score": 1
                        },
                        {
                          "value": "severe",
                          "label": "Severe valgus",
                          "score": 2
                        }
                      ],
                      "validation_rules": {
                        "required": true,
                        "enum": [
                          "none",
                          "mild",
                          "severe"
                        ]
                      },
                      "metadata": {
                        "body_region": "lower_body",
                        "movement_phase": "descent",
                        "compensation_pattern": "knee_valgus"
                      },
                      "response": {
                        "id": "resp-os-002",
                        "question_id": "q-os-002",
                        "test_result_id": "tr-001-overhead-squat",
                        "response": "mild",
                        "created_at": "2025-10-23T09:12:30Z",
                        "updated_at": "2025-10-23T09:12:30Z"
                      }
                    },
                    {
                      "id": "q-os-003",
                      "test_id": "test-overhead-squat",
                      "question_text": "Maximum squat depth achieved (inches from floor to hip joint)",
                      "question_type": "numeric",
                      "is_required": true,
                      "display_order": 3,
                      "help_text": "Measure the vertical distance from floor to the greater trochanter at lowest point",
                      "validation_rules": {
                        "required": true,
                        "min": 0,
                        "max": 48,
                        "unit": "inches"
                      },
                      "metadata": {
                        "body_region": "lower_body",
                        "movement_phase": "bottom_position",
                        "measurement_type": "depth"
                      },
                      "response": {
                        "id": "resp-os-003",
                        "question_id": "q-os-003",
                        "test_result_id": "tr-001-overhead-squat",
                        "response": 18.5,
                        "created_at": "2025-10-23T09:13:00Z",
                        "updated_at": "2025-10-23T09:13:00Z"
                      }
                    },
                    {
                      "id": "q-os-004",
                      "test_id": "test-overhead-squat",
                      "question_text": "Time to complete 5 repetitions",
                      "question_type": "duration",
                      "is_required": true,
                      "display_order": 4,
                      "help_text": "Record total time for 5 controlled repetitions",
                      "validation_rules": {
                        "required": true,
                        "min_seconds": 10,
                        "max_seconds": 120
                      },
                      "metadata": {
                        "measurement_type": "tempo",
                        "repetitions": 5
                      },
                      "response": {
                        "id": "resp-os-004",
                        "question_id": "q-os-004",
                        "test_result_id": "tr-001-overhead-squat",
                        "response": 45,
                        "created_at": "2025-10-23T09:14:00Z",
                        "updated_at": "2025-10-23T09:14:00Z"
                      }
                    },
                    {
                      "id": "q-os-005",
                      "test_id": "test-overhead-squat",
                      "question_text": "Overall movement quality rating",
                      "question_type": "scale_4",
                      "is_required": true,
                      "display_order": 5,
                      "help_text": "Rate the overall quality of the movement pattern",
                      "options": [
                        {
                          "value": "poor",
                          "label": "Poor - Multiple compensations",
                          "score": 1
                        },
                        {
                          "value": "fair",
                          "label": "Fair - Some compensations",
                          "score": 2
                        },
                        {
                          "value": "good",
                          "label": "Good - Minor compensations",
                          "score": 3
                        },
                        {
                          "value": "excellent",
                          "label": "Excellent - No compensations",
                          "score": 4
                        }
                      ],
                      "validation_rules": {
                        "required": true,
                        "enum": [
                          "poor",
                          "fair",
                          "good",
                          "excellent"
                        ]
                      },
                      "metadata": {
                        "assessment_type": "qualitative"
                      },
                      "response": {
                        "id": "resp-os-005",
                        "question_id": "q-os-005",
                        "test_result_id": "tr-001-overhead-squat",
                        "response": "fair",
                        "created_at": "2025-10-23T09:14:30Z",
                        "updated_at": "2025-10-23T09:14:30Z"
                      }
                    },
                    {
                      "id": "q-os-006",
                      "test_id": "test-overhead-squat",
                      "question_text": "Additional observations or notes",
                      "question_type": "textarea",
                      "is_required": false,
                      "display_order": 6,
                      "help_text": "Record any additional observations, limitations, or concerns",
                      "validation_rules": {
                        "max_length": 1000
                      },
                      "metadata": {
                        "field_type": "notes"
                      },
                      "response": {
                        "id": "resp-os-006",
                        "question_id": "q-os-006",
                        "test_result_id": "tr-001-overhead-squat",
                        "response": "Client shows good effort but limited ankle dorsiflexion. Recommend adding ankle mobility work to program. Also noted some upper back rounding during descent.",
                        "created_at": "2025-10-23T09:15:00Z",
                        "updated_at": "2025-10-23T09:15:00Z"
                      }
                    }
                  ],
                  "media_files": [
                    {
                      "id": "media-os-001",
                      "test_result_id": "tr-001-overhead-squat",
                      "file_type": "video",
                      "file_url": "https://storage.example.com/assessments/a1b2c3d4/overhead-squat-front.mp4",
                      "thumbnail_url": "https://storage.example.com/assessments/a1b2c3d4/overhead-squat-front-thumb.jpg",
                      "file_size_bytes": 15728640,
                      "duration_seconds": 30,
                      "view_angle": "anterior",
                      "caption": "Overhead Squat - Front View",
                      "created_at": "2025-10-23T09:11:00Z",
                      "metadata": {
                        "resolution": "1920x1080",
                        "fps": 30,
                        "codec": "h264"
                      }
                    },
                    {
                      "id": "media-os-002",
                      "test_result_id": "tr-001-overhead-squat",
                      "file_type": "video",
                      "file_url": "https://storage.example.com/assessments/a1b2c3d4/overhead-squat-side.mp4",
                      "thumbnail_url": "https://storage.example.com/assessments/a1b2c3d4/overhead-squat-side-thumb.jpg",
                      "file_size_bytes": 16777216,
                      "duration_seconds": 30,
                      "view_angle": "lateral",
                      "caption": "Overhead Squat - Side View",
                      "created_at": "2025-10-23T09:11:30Z",
                      "metadata": {
                        "resolution": "1920x1080",
                        "fps": 30,
                        "codec": "h264"
                      }
                    }
                  ]
                },
                {
                  "id": "tr-002-balance-left",
                  "assessment_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
                  "test_id": "test-single-leg-balance",
                  "test_name": "Single Leg Balance Test - Left Leg",
                  "test_description": "Assesses unilateral balance and stability",
                  "test_category": "balance",
                  "display_order": 2,
                  "status": "completed",
                  "completed_at": "2025-10-23T09:25:00Z",
                  "created_at": "2025-10-23T09:20:00Z",
                  "updated_at": "2025-10-23T09:25:00Z",
                  "metadata": {
                    "duration_seconds": 180,
                    "video_count": 1,
                    "test_side": "left",
                    "test_protocol": "Eyes Open Single Leg Stance"
                  },
                  "questions": [
                    {
                      "id": "q-bal-001",
                      "test_id": "test-single-leg-balance",
                      "question_text": "Maximum balance time achieved (seconds)",
                      "question_type": "duration",
                      "is_required": true,
                      "display_order": 1,
                      "help_text": "Record how long the client maintained single leg stance without touching down",
                      "validation_rules": {
                        "required": true,
                        "min_seconds": 0,
                        "max_seconds": 60
                      },
                      "metadata": {
                        "measurement_type": "endurance",
                        "test_side": "left"
                      },
                      "response": {
                        "id": "resp-bal-001",
                        "question_id": "q-bal-001",
                        "test_result_id": "tr-002-balance-left",
                        "response": 23,
                        "created_at": "2025-10-23T09:23:00Z",
                        "updated_at": "2025-10-23T09:23:00Z"
                      }
                    },
                    {
                      "id": "q-bal-002",
                      "test_id": "test-single-leg-balance",
                      "question_text": "Compensations observed",
                      "question_type": "multiselect",
                      "is_required": false,
                      "display_order": 2,
                      "help_text": "Select all compensatory movements observed during the test",
                      "options": [
                        {
                          "value": "hip_hike",
                          "label": "Hip hike"
                        },
                        {
                          "value": "trunk_lean",
                          "label": "Trunk lean"
                        },
                        {
                          "value": "arm_flailing",
                          "label": "Arm flailing"
                        },
                        {
                          "value": "excessive_sway",
                          "label": "Excessive sway"
                        },
                        {
                          "value": "foot_adjustment",
                          "label": "Foot adjustments"
                        },
                        {
                          "value": "none",
                          "label": "No compensations"
                        }
                      ],
                      "validation_rules": {
                        "min_selections": 0,
                        "max_selections": 6
                      },
                      "metadata": {
                        "assessment_type": "qualitative"
                      },
                      "response": {
                        "id": "resp-bal-002",
                        "question_id": "q-bal-002",
                        "test_result_id": "tr-002-balance-left",
                        "response": [
                          "hip_hike",
                          "arm_flailing"
                        ],
                        "created_at": "2025-10-23T09:24:00Z",
                        "updated_at": "2025-10-23T09:24:00Z"
                      }
                    }
                  ],
                  "media_files": [
                    {
                      "id": "media-bal-001",
                      "test_result_id": "tr-002-balance-left",
                      "file_type": "video",
                      "file_url": "https://storage.example.com/assessments/a1b2c3d4/balance-left.mp4",
                      "thumbnail_url": "https://storage.example.com/assessments/a1b2c3d4/balance-left-thumb.jpg",
                      "file_size_bytes": 8388608,
                      "duration_seconds": 25,
                      "view_angle": "anterior",
                      "caption": "Single Leg Balance - Left Leg",
                      "created_at": "2025-10-23T09:22:00Z",
                      "metadata": {
                        "resolution": "1920x1080",
                        "fps": 30,
                        "codec": "h264"
                      }
                    }
                  ]
                },
                {
                  "id": "tr-003-balance-right",
                  "assessment_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
                  "test_id": "test-single-leg-balance",
                  "test_name": "Single Leg Balance Test - Right Leg",
                  "test_description": "Assesses unilateral balance and stability",
                  "test_category": "balance",
                  "display_order": 3,
                  "status": "completed",
                  "completed_at": "2025-10-23T09:32:00Z",
                  "created_at": "2025-10-23T09:28:00Z",
                  "updated_at": "2025-10-23T09:32:00Z",
                  "metadata": {
                    "duration_seconds": 180,
                    "video_count": 1,
                    "test_side": "right",
                    "test_protocol": "Eyes Open Single Leg Stance"
                  },
                  "questions": [
                    {
                      "id": "q-bal-001",
                      "test_id": "test-single-leg-balance",
                      "question_text": "Maximum balance time achieved (seconds)",
                      "question_type": "duration",
                      "is_required": true,
                      "display_order": 1,
                      "help_text": "Record how long the client maintained single leg stance without touching down",
                      "validation_rules": {
                        "required": true,
                        "min_seconds": 0,
                        "max_seconds": 60
                      },
                      "metadata": {
                        "measurement_type": "endurance",
                        "test_side": "right"
                      },
                      "response": {
                        "id": "resp-bal-003",
                        "question_id": "q-bal-001",
                        "test_result_id": "tr-003-balance-right",
                        "response": 40,
                        "created_at": "2025-10-23T09:30:00Z",
                        "updated_at": "2025-10-23T09:30:00Z"
                      }
                    },
                    {
                      "id": "q-bal-002",
                      "test_id": "test-single-leg-balance",
                      "question_text": "Compensations observed",
                      "question_type": "multiselect",
                      "is_required": false,
                      "display_order": 2,
                      "help_text": "Select all compensatory movements observed during the test",
                      "options": [
                        {
                          "value": "hip_hike",
                          "label": "Hip hike"
                        },
                        {
                          "value": "trunk_lean",
                          "label": "Trunk lean"
                        },
                        {
                          "value": "arm_flailing",
                          "label": "Arm flailing"
                        },
                        {
                          "value": "excessive_sway",
                          "label": "Excessive sway"
                        },
                        {
                          "value": "foot_adjustment",
                          "label": "Foot adjustments"
                        },
                        {
                          "value": "none",
                          "label": "No compensations"
                        }
                      ],
                      "validation_rules": {
                        "min_selections": 0,
                        "max_selections": 6
                      },
                      "metadata": {
                        "assessment_type": "qualitative"
                      },
                      "response": {
                        "id": "resp-bal-004",
                        "question_id": "q-bal-002",
                        "test_result_id": "tr-003-balance-right",
                        "response": [
                          "none"
                        ],
                        "created_at": "2025-10-23T09:31:00Z",
                        "updated_at": "2025-10-23T09:31:00Z"
                      }
                    }
                  ],
                  "media_files": [
                    {
                      "id": "media-bal-002",
                      "test_result_id": "tr-003-balance-right",
                      "file_type": "video",
                      "file_url": "https://storage.example.com/assessments/a1b2c3d4/balance-right.mp4",
                      "thumbnail_url": "https://storage.example.com/assessments/a1b2c3d4/balance-right-thumb.jpg",
                      "file_size_bytes": 9437184,
                      "duration_seconds": 42,
                      "view_angle": "anterior",
                      "caption": "Single Leg Balance - Right Leg",
                      "created_at": "2025-10-23T09:29:00Z",
                      "metadata": {
                        "resolution": "1920x1080",
                        "fps": 30,
                        "codec": "h264"
                      }
                    }
                  ]
                },
                {
                  "id": "tr-004-shoulder-mob",
                  "assessment_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
                  "test_id": "test-shoulder-mobility",
                  "test_name": "Shoulder Mobility Assessment",
                  "test_description": "Evaluates shoulder range of motion and mobility patterns",
                  "test_category": "mobility",
                  "display_order": 4,
                  "status": "completed",
                  "completed_at": "2025-10-23T09:42:00Z",
                  "created_at": "2025-10-23T09:35:00Z",
                  "updated_at": "2025-10-23T09:42:00Z",
                  "metadata": {
                    "duration_seconds": 240,
                    "video_count": 0,
                    "image_count": 1,
                    "test_protocol": "Shoulder Flexion ROM"
                  },
                  "questions": [
                    {
                      "id": "q-sh-001",
                      "test_id": "test-shoulder-mobility",
                      "question_text": "Shoulder flexion range of motion - Right (degrees)",
                      "question_type": "numeric",
                      "is_required": true,
                      "display_order": 1,
                      "help_text": "Measure active shoulder flexion using goniometer",
                      "validation_rules": {
                        "required": true,
                        "min": 0,
                        "max": 180,
                        "unit": "degrees"
                      },
                      "metadata": {
                        "body_region": "upper_body",
                        "movement_type": "flexion",
                        "test_side": "right"
                      },
                      "response": {
                        "id": "resp-sh-001",
                        "question_id": "q-sh-001",
                        "test_result_id": "tr-004-shoulder-mob",
                        "response": 145,
                        "created_at": "2025-10-23T09:38:00Z",
                        "updated_at": "2025-10-23T09:38:00Z"
                      }
                    },
                    {
                      "id": "q-sh-002",
                      "test_id": "test-shoulder-mobility",
                      "question_text": "Shoulder flexion range of motion - Left (degrees)",
                      "question_type": "numeric",
                      "is_required": true,
                      "display_order": 2,
                      "help_text": "Measure active shoulder flexion using goniometer",
                      "validation_rules": {
                        "required": true,
                        "min": 0,
                        "max": 180,
                        "unit": "degrees"
                      },
                      "metadata": {
                        "body_region": "upper_body",
                        "movement_type": "flexion",
                        "test_side": "left"
                      },
                      "response": {
                        "id": "resp-sh-002",
                        "question_id": "q-sh-002",
                        "test_result_id": "tr-004-shoulder-mob",
                        "response": 175,
                        "created_at": "2025-10-23T09:39:00Z",
                        "updated_at": "2025-10-23T09:39:00Z"
                      }
                    },
                    {
                      "id": "q-sh-003",
                      "test_id": "test-shoulder-mobility",
                      "question_text": "Pain level during movement",
                      "question_type": "scale_severity",
                      "is_required": true,
                      "display_order": 3,
                      "help_text": "Rate pain during shoulder flexion (0 = no pain, 10 = severe pain)",
                      "options": [
                        {
                          "value": 0,
                          "label": "No pain"
                        },
                        {
                          "value": 1,
                          "label": "Minimal"
                        },
                        {
                          "value": 2,
                          "label": "Minimal"
                        },
                        {
                          "value": 3,
                          "label": "Mild"
                        },
                        {
                          "value": 4,
                          "label": "Mild"
                        },
                        {
                          "value": 5,
                          "label": "Moderate"
                        },
                        {
                          "value": 6,
                          "label": "Moderate"
                        },
                        {
                          "value": 7,
                          "label": "Severe"
                        },
                        {
                          "value": 8,
                          "label": "Severe"
                        },
                        {
                          "value": 9,
                          "label": "Very severe"
                        },
                        {
                          "value": 10,
                          "label": "Worst possible"
                        }
                      ],
                      "validation_rules": {
                        "required": true,
                        "min": 0,
                        "max": 10
                      },
                      "metadata": {
                        "scale_type": "pain"
                      },
                      "response": {
                        "id": "resp-sh-003",
                        "question_id": "q-sh-003",
                        "test_result_id": "tr-004-shoulder-mob",
                        "response": 2,
                        "created_at": "2025-10-23T09:40:00Z",
                        "updated_at": "2025-10-23T09:40:00Z"
                      }
                    },
                    {
                      "id": "q-sh-004",
                      "test_id": "test-shoulder-mobility",
                      "question_text": "Quality of movement",
                      "question_type": "select",
                      "is_required": true,
                      "display_order": 4,
                      "help_text": "Assess the overall quality of the shoulder flexion movement",
                      "options": [
                        {
                          "value": "smooth",
                          "label": "Smooth and controlled"
                        },
                        {
                          "value": "hesitant",
                          "label": "Hesitant but controlled"
                        },
                        {
                          "value": "compensated",
                          "label": "Movement with compensations"
                        },
                        {
                          "value": "restricted",
                          "label": "Significantly restricted"
                        }
                      ],
                      "validation_rules": {
                        "required": true,
                        "enum": [
                          "smooth",
                          "hesitant",
                          "compensated",
                          "restricted"
                        ]
                      },
                      "metadata": {
                        "assessment_type": "qualitative"
                      },
                      "response": {
                        "id": "resp-sh-004",
                        "question_id": "q-sh-004",
                        "test_result_id": "tr-004-shoulder-mob",
                        "response": "compensated",
                        "created_at": "2025-10-23T09:41:00Z",
                        "updated_at": "2025-10-23T09:41:00Z"
                      }
                    },
                    {
                      "id": "q-sh-005",
                      "test_id": "test-shoulder-mobility",
                      "question_text": "Clinical notes",
                      "question_type": "textarea",
                      "is_required": false,
                      "display_order": 5,
                      "help_text": "Additional observations about shoulder mobility",
                      "validation_rules": {
                        "max_length": 1000
                      },
                      "metadata": {
                        "field_type": "notes"
                      },
                      "response": {
                        "id": "resp-sh-005",
                        "question_id": "q-sh-005",
                        "test_result_id": "tr-004-shoulder-mob",
                        "response": "Patient reports mild discomfort in right shoulder at end range. Notable scapular winging on right side. Recommend rotator cuff strengthening and scapular stabilization exercises.",
                        "created_at": "2025-10-23T09:42:00Z",
                        "updated_at": "2025-10-23T09:42:00Z"
                      }
                    }
                  ],
                  "media_files": [
                    {
                      "id": "media-sh-001",
                      "test_result_id": "tr-004-shoulder-mob",
                      "file_type": "image",
                      "file_url": "https://storage.example.com/assessments/a1b2c3d4/shoulder-rom-measurement.jpg",
                      "thumbnail_url": "https://storage.example.com/assessments/a1b2c3d4/shoulder-rom-measurement-thumb.jpg",
                      "file_size_bytes": 2097152,
                      "view_angle": "lateral",
                      "caption": "Goniometer measurement - Right shoulder flexion",
                      "created_at": "2025-10-23T09:38:30Z",
                      "metadata": {
                        "resolution": "3024x4032",
                        "format": "jpeg"
                      }
                    }
                  ]
                }
              ],
              "summary": {
                "total_tests": 4,
                "completed_tests": 4,
                "total_questions": 16,
                "answered_questions": 16,
                "total_media_files": 5,
                "bilateral_comparisons": [
                  {
                    "test_name": "Single Leg Balance Test",
                    "metric": "Balance Duration",
                    "left_value": 23,
                    "right_value": 40,
                    "unit": "seconds",
                    "difference": 17,
                    "percent_difference": "42.5%",
                    "interpretation": "Right leg shows significantly better balance. Consider left leg strengthening."
                  },
                  {
                    "test_name": "Shoulder Mobility Assessment",
                    "metric": "Shoulder Flexion ROM",
                    "left_value": 175,
                    "right_value": 145,
                    "unit": "degrees",
                    "difference": 30,
                    "percent_difference": "17.1%",
                    "interpretation": "Right shoulder shows limited ROM. Recommend mobility work and investigation of underlying causes."
                  }
                ],
                "key_findings": [
                  "Overhead squat shows mild knee valgus and limited ankle mobility",
                  "Significant bilateral balance deficit (42.5% difference) favoring right leg",
                  "Right shoulder mobility limited to 145 (normal: 170-180)",
                  "Minimal pain reported during shoulder movement (2/10)",
                  "Multiple compensatory patterns observed during movement screening"
                ],
                "recommendations": [
                  "Ankle mobility exercises (calf stretching, dorsiflexion drills)",
                  "Hip and glute strengthening to address knee valgus",
                  "Left leg balance and stability work",
                  "Right shoulder mobility and rotator cuff strengthening",
                  "Scapular stabilization exercises",
                  "Follow-up assessment in 6-8 weeks to track progress"
                ]
              }
            },
            "meta": {
              "timestamp": "2025-10-23T09:45:00Z",
              "request_id": "req_1729674300_abc123",
              "version": "1.0.0"
            }
          },
          "webhookUrl": "https://fitwithparirp.app.n8n.cloud/webhook-test/ai-agents/create-profiles",
          "executionMode": "test"
        }
      }
    ],
    "Transform Onboarding Form": [
      {
        "json": {
          "sessionId": "123432",
          "form_type": "onboarding",
          "assessment": {
            "id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
            "session_id": "c7d8e9f0-1a2b-3c4d-5e6f-7890abcdef12",
            "student_id": "550e8400-e29b-41d4-a716-446655440000",
            "coach_id": "660e8400-e29b-41d4-a716-446655440001",
            "status": "completed",
            "created_at": "2025-10-23T09:00:00Z",
            "updated_at": "2025-10-23T09:45:00Z",
            "completed_at": "2025-10-23T09:45:00Z",
            "student": {
              "id": "550e8400-e29b-41d4-a716-446655440000",
              "full_name": "Sarah Johnson",
              "email": "sarah.johnson@example.com",
              "avatar_url": "https://example.com/avatars/sarah.jpg",
              "date_of_birth": "1992-05-15",
              "gender": "female",
              "fitness_goal": "Improve overall strength and mobility"
            },
            "coach": {
              "id": "660e8400-e29b-41d4-a716-446655440001",
              "full_name": "Dr. Mike Martinez",
              "email": "mike.martinez@fitwithpari.com",
              "avatar_url": "https://example.com/avatars/mike.jpg",
              "bio": "Certified Strength & Conditioning Specialist with 10 years of experience",
              "specialties": [
                "Movement Assessment",
                "Corrective Exercise",
                "Sports Performance"
              ]
            }
          },
          "test_results": [
            {
              "id": "tr-001-overhead-squat",
              "assessment_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
              "test_id": "test-overhead-squat",
              "test_name": "Overhead Squat Assessment",
              "test_description": "Evaluates overall body mechanics, mobility, and stability during a fundamental movement pattern",
              "test_category": "movement_screening",
              "display_order": 1,
              "status": "completed",
              "completed_at": "2025-10-23T09:15:00Z",
              "created_at": "2025-10-23T09:10:00Z",
              "updated_at": "2025-10-23T09:15:00Z",
              "metadata": {
                "duration_seconds": 300,
                "video_count": 2,
                "repetitions_performed": 5,
                "test_protocol": "NASM Overhead Squat Assessment"
              },
              "questions": [
                {
                  "id": "q-os-001",
                  "test_id": "test-overhead-squat",
                  "question_text": "Does the client's feet turn out during the movement?",
                  "question_type": "binary",
                  "is_required": true,
                  "display_order": 1,
                  "help_text": "Observe if feet externally rotate (point outward) during the squat",
                  "validation_rules": {
                    "required": true
                  },
                  "metadata": {
                    "body_region": "lower_body",
                    "movement_phase": "descent",
                    "compensation_pattern": "foot_pronation"
                  },
                  "response": {
                    "id": "resp-os-001",
                    "question_id": "q-os-001",
                    "test_result_id": "tr-001-overhead-squat",
                    "response": true,
                    "created_at": "2025-10-23T09:12:00Z",
                    "updated_at": "2025-10-23T09:12:00Z"
                  }
                },
                {
                  "id": "q-os-002",
                  "test_id": "test-overhead-squat",
                  "question_text": "Does the client's knees move inward (valgus collapse)?",
                  "question_type": "ternary",
                  "is_required": true,
                  "display_order": 2,
                  "help_text": "Check for medial knee displacement during squat",
                  "options": [
                    {
                      "value": "none",
                      "label": "No valgus",
                      "score": 0
                    },
                    {
                      "value": "mild",
                      "label": "Mild valgus",
                      "score": 1
                    },
                    {
                      "value": "severe",
                      "label": "Severe valgus",
                      "score": 2
                    }
                  ],
                  "validation_rules": {
                    "required": true,
                    "enum": [
                      "none",
                      "mild",
                      "severe"
                    ]
                  },
                  "metadata": {
                    "body_region": "lower_body",
                    "movement_phase": "descent",
                    "compensation_pattern": "knee_valgus"
                  },
                  "response": {
                    "id": "resp-os-002",
                    "question_id": "q-os-002",
                    "test_result_id": "tr-001-overhead-squat",
                    "response": "mild",
                    "created_at": "2025-10-23T09:12:30Z",
                    "updated_at": "2025-10-23T09:12:30Z"
                  }
                },
                {
                  "id": "q-os-003",
                  "test_id": "test-overhead-squat",
                  "question_text": "Maximum squat depth achieved (inches from floor to hip joint)",
                  "question_type": "numeric",
                  "is_required": true,
                  "display_order": 3,
                  "help_text": "Measure the vertical distance from floor to the greater trochanter at lowest point",
                  "validation_rules": {
                    "required": true,
                    "min": 0,
                    "max": 48,
                    "unit": "inches"
                  },
                  "metadata": {
                    "body_region": "lower_body",
                    "movement_phase": "bottom_position",
                    "measurement_type": "depth"
                  },
                  "response": {
                    "id": "resp-os-003",
                    "question_id": "q-os-003",
                    "test_result_id": "tr-001-overhead-squat",
                    "response": 18.5,
                    "created_at": "2025-10-23T09:13:00Z",
                    "updated_at": "2025-10-23T09:13:00Z"
                  }
                },
                {
                  "id": "q-os-004",
                  "test_id": "test-overhead-squat",
                  "question_text": "Time to complete 5 repetitions",
                  "question_type": "duration",
                  "is_required": true,
                  "display_order": 4,
                  "help_text": "Record total time for 5 controlled repetitions",
                  "validation_rules": {
                    "required": true,
                    "min_seconds": 10,
                    "max_seconds": 120
                  },
                  "metadata": {
                    "measurement_type": "tempo",
                    "repetitions": 5
                  },
                  "response": {
                    "id": "resp-os-004",
                    "question_id": "q-os-004",
                    "test_result_id": "tr-001-overhead-squat",
                    "response": 45,
                    "created_at": "2025-10-23T09:14:00Z",
                    "updated_at": "2025-10-23T09:14:00Z"
                  }
                },
                {
                  "id": "q-os-005",
                  "test_id": "test-overhead-squat",
                  "question_text": "Overall movement quality rating",
                  "question_type": "scale_4",
                  "is_required": true,
                  "display_order": 5,
                  "help_text": "Rate the overall quality of the movement pattern",
                  "options": [
                    {
                      "value": "poor",
                      "label": "Poor - Multiple compensations",
                      "score": 1
                    },
                    {
                      "value": "fair",
                      "label": "Fair - Some compensations",
                      "score": 2
                    },
                    {
                      "value": "good",
                      "label": "Good - Minor compensations",
                      "score": 3
                    },
                    {
                      "value": "excellent",
                      "label": "Excellent - No compensations",
                      "score": 4
                    }
                  ],
                  "validation_rules": {
                    "required": true,
                    "enum": [
                      "poor",
                      "fair",
                      "good",
                      "excellent"
                    ]
                  },
                  "metadata": {
                    "assessment_type": "qualitative"
                  },
                  "response": {
                    "id": "resp-os-005",
                    "question_id": "q-os-005",
                    "test_result_id": "tr-001-overhead-squat",
                    "response": "fair",
                    "created_at": "2025-10-23T09:14:30Z",
                    "updated_at": "2025-10-23T09:14:30Z"
                  }
                },
                {
                  "id": "q-os-006",
                  "test_id": "test-overhead-squat",
                  "question_text": "Additional observations or notes",
                  "question_type": "textarea",
                  "is_required": false,
                  "display_order": 6,
                  "help_text": "Record any additional observations, limitations, or concerns",
                  "validation_rules": {
                    "max_length": 1000
                  },
                  "metadata": {
                    "field_type": "notes"
                  },
                  "response": {
                    "id": "resp-os-006",
                    "question_id": "q-os-006",
                    "test_result_id": "tr-001-overhead-squat",
                    "response": "Client shows good effort but limited ankle dorsiflexion. Recommend adding ankle mobility work to program. Also noted some upper back rounding during descent.",
                    "created_at": "2025-10-23T09:15:00Z",
                    "updated_at": "2025-10-23T09:15:00Z"
                  }
                }
              ],
              "media_files": [
                {
                  "id": "media-os-001",
                  "test_result_id": "tr-001-overhead-squat",
                  "file_type": "video",
                  "file_url": "https://storage.example.com/assessments/a1b2c3d4/overhead-squat-front.mp4",
                  "thumbnail_url": "https://storage.example.com/assessments/a1b2c3d4/overhead-squat-front-thumb.jpg",
                  "file_size_bytes": 15728640,
                  "duration_seconds": 30,
                  "view_angle": "anterior",
                  "caption": "Overhead Squat - Front View",
                  "created_at": "2025-10-23T09:11:00Z",
                  "metadata": {
                    "resolution": "1920x1080",
                    "fps": 30,
                    "codec": "h264"
                  }
                },
                {
                  "id": "media-os-002",
                  "test_result_id": "tr-001-overhead-squat",
                  "file_type": "video",
                  "file_url": "https://storage.example.com/assessments/a1b2c3d4/overhead-squat-side.mp4",
                  "thumbnail_url": "https://storage.example.com/assessments/a1b2c3d4/overhead-squat-side-thumb.jpg",
                  "file_size_bytes": 16777216,
                  "duration_seconds": 30,
                  "view_angle": "lateral",
                  "caption": "Overhead Squat - Side View",
                  "created_at": "2025-10-23T09:11:30Z",
                  "metadata": {
                    "resolution": "1920x1080",
                    "fps": 30,
                    "codec": "h264"
                  }
                }
              ]
            },
            {
              "id": "tr-002-balance-left",
              "assessment_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
              "test_id": "test-single-leg-balance",
              "test_name": "Single Leg Balance Test - Left Leg",
              "test_description": "Assesses unilateral balance and stability",
              "test_category": "balance",
              "display_order": 2,
              "status": "completed",
              "completed_at": "2025-10-23T09:25:00Z",
              "created_at": "2025-10-23T09:20:00Z",
              "updated_at": "2025-10-23T09:25:00Z",
              "metadata": {
                "duration_seconds": 180,
                "video_count": 1,
                "test_side": "left",
                "test_protocol": "Eyes Open Single Leg Stance"
              },
              "questions": [
                {
                  "id": "q-bal-001",
                  "test_id": "test-single-leg-balance",
                  "question_text": "Maximum balance time achieved (seconds)",
                  "question_type": "duration",
                  "is_required": true,
                  "display_order": 1,
                  "help_text": "Record how long the client maintained single leg stance without touching down",
                  "validation_rules": {
                    "required": true,
                    "min_seconds": 0,
                    "max_seconds": 60
                  },
                  "metadata": {
                    "measurement_type": "endurance",
                    "test_side": "left"
                  },
                  "response": {
                    "id": "resp-bal-001",
                    "question_id": "q-bal-001",
                    "test_result_id": "tr-002-balance-left",
                    "response": 23,
                    "created_at": "2025-10-23T09:23:00Z",
                    "updated_at": "2025-10-23T09:23:00Z"
                  }
                },
                {
                  "id": "q-bal-002",
                  "test_id": "test-single-leg-balance",
                  "question_text": "Compensations observed",
                  "question_type": "multiselect",
                  "is_required": false,
                  "display_order": 2,
                  "help_text": "Select all compensatory movements observed during the test",
                  "options": [
                    {
                      "value": "hip_hike",
                      "label": "Hip hike"
                    },
                    {
                      "value": "trunk_lean",
                      "label": "Trunk lean"
                    },
                    {
                      "value": "arm_flailing",
                      "label": "Arm flailing"
                    },
                    {
                      "value": "excessive_sway",
                      "label": "Excessive sway"
                    },
                    {
                      "value": "foot_adjustment",
                      "label": "Foot adjustments"
                    },
                    {
                      "value": "none",
                      "label": "No compensations"
                    }
                  ],
                  "validation_rules": {
                    "min_selections": 0,
                    "max_selections": 6
                  },
                  "metadata": {
                    "assessment_type": "qualitative"
                  },
                  "response": {
                    "id": "resp-bal-002",
                    "question_id": "q-bal-002",
                    "test_result_id": "tr-002-balance-left",
                    "response": [
                      "hip_hike",
                      "arm_flailing"
                    ],
                    "created_at": "2025-10-23T09:24:00Z",
                    "updated_at": "2025-10-23T09:24:00Z"
                  }
                }
              ],
              "media_files": [
                {
                  "id": "media-bal-001",
                  "test_result_id": "tr-002-balance-left",
                  "file_type": "video",
                  "file_url": "https://storage.example.com/assessments/a1b2c3d4/balance-left.mp4",
                  "thumbnail_url": "https://storage.example.com/assessments/a1b2c3d4/balance-left-thumb.jpg",
                  "file_size_bytes": 8388608,
                  "duration_seconds": 25,
                  "view_angle": "anterior",
                  "caption": "Single Leg Balance - Left Leg",
                  "created_at": "2025-10-23T09:22:00Z",
                  "metadata": {
                    "resolution": "1920x1080",
                    "fps": 30,
                    "codec": "h264"
                  }
                }
              ]
            },
            {
              "id": "tr-003-balance-right",
              "assessment_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
              "test_id": "test-single-leg-balance",
              "test_name": "Single Leg Balance Test - Right Leg",
              "test_description": "Assesses unilateral balance and stability",
              "test_category": "balance",
              "display_order": 3,
              "status": "completed",
              "completed_at": "2025-10-23T09:32:00Z",
              "created_at": "2025-10-23T09:28:00Z",
              "updated_at": "2025-10-23T09:32:00Z",
              "metadata": {
                "duration_seconds": 180,
                "video_count": 1,
                "test_side": "right",
                "test_protocol": "Eyes Open Single Leg Stance"
              },
              "questions": [
                {
                  "id": "q-bal-001",
                  "test_id": "test-single-leg-balance",
                  "question_text": "Maximum balance time achieved (seconds)",
                  "question_type": "duration",
                  "is_required": true,
                  "display_order": 1,
                  "help_text": "Record how long the client maintained single leg stance without touching down",
                  "validation_rules": {
                    "required": true,
                    "min_seconds": 0,
                    "max_seconds": 60
                  },
                  "metadata": {
                    "measurement_type": "endurance",
                    "test_side": "right"
                  },
                  "response": {
                    "id": "resp-bal-003",
                    "question_id": "q-bal-001",
                    "test_result_id": "tr-003-balance-right",
                    "response": 40,
                    "created_at": "2025-10-23T09:30:00Z",
                    "updated_at": "2025-10-23T09:30:00Z"
                  }
                },
                {
                  "id": "q-bal-002",
                  "test_id": "test-single-leg-balance",
                  "question_text": "Compensations observed",
                  "question_type": "multiselect",
                  "is_required": false,
                  "display_order": 2,
                  "help_text": "Select all compensatory movements observed during the test",
                  "options": [
                    {
                      "value": "hip_hike",
                      "label": "Hip hike"
                    },
                    {
                      "value": "trunk_lean",
                      "label": "Trunk lean"
                    },
                    {
                      "value": "arm_flailing",
                      "label": "Arm flailing"
                    },
                    {
                      "value": "excessive_sway",
                      "label": "Excessive sway"
                    },
                    {
                      "value": "foot_adjustment",
                      "label": "Foot adjustments"
                    },
                    {
                      "value": "none",
                      "label": "No compensations"
                    }
                  ],
                  "validation_rules": {
                    "min_selections": 0,
                    "max_selections": 6
                  },
                  "metadata": {
                    "assessment_type": "qualitative"
                  },
                  "response": {
                    "id": "resp-bal-004",
                    "question_id": "q-bal-002",
                    "test_result_id": "tr-003-balance-right",
                    "response": [
                      "none"
                    ],
                    "created_at": "2025-10-23T09:31:00Z",
                    "updated_at": "2025-10-23T09:31:00Z"
                  }
                }
              ],
              "media_files": [
                {
                  "id": "media-bal-002",
                  "test_result_id": "tr-003-balance-right",
                  "file_type": "video",
                  "file_url": "https://storage.example.com/assessments/a1b2c3d4/balance-right.mp4",
                  "thumbnail_url": "https://storage.example.com/assessments/a1b2c3d4/balance-right-thumb.jpg",
                  "file_size_bytes": 9437184,
                  "duration_seconds": 42,
                  "view_angle": "anterior",
                  "caption": "Single Leg Balance - Right Leg",
                  "created_at": "2025-10-23T09:29:00Z",
                  "metadata": {
                    "resolution": "1920x1080",
                    "fps": 30,
                    "codec": "h264"
                  }
                }
              ]
            },
            {
              "id": "tr-004-shoulder-mob",
              "assessment_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
              "test_id": "test-shoulder-mobility",
              "test_name": "Shoulder Mobility Assessment",
              "test_description": "Evaluates shoulder range of motion and mobility patterns",
              "test_category": "mobility",
              "display_order": 4,
              "status": "completed",
              "completed_at": "2025-10-23T09:42:00Z",
              "created_at": "2025-10-23T09:35:00Z",
              "updated_at": "2025-10-23T09:42:00Z",
              "metadata": {
                "duration_seconds": 240,
                "video_count": 0,
                "image_count": 1,
                "test_protocol": "Shoulder Flexion ROM"
              },
              "questions": [
                {
                  "id": "q-sh-001",
                  "test_id": "test-shoulder-mobility",
                  "question_text": "Shoulder flexion range of motion - Right (degrees)",
                  "question_type": "numeric",
                  "is_required": true,
                  "display_order": 1,
                  "help_text": "Measure active shoulder flexion using goniometer",
                  "validation_rules": {
                    "required": true,
                    "min": 0,
                    "max": 180,
                    "unit": "degrees"
                  },
                  "metadata": {
                    "body_region": "upper_body",
                    "movement_type": "flexion",
                    "test_side": "right"
                  },
                  "response": {
                    "id": "resp-sh-001",
                    "question_id": "q-sh-001",
                    "test_result_id": "tr-004-shoulder-mob",
                    "response": 145,
                    "created_at": "2025-10-23T09:38:00Z",
                    "updated_at": "2025-10-23T09:38:00Z"
                  }
                },
                {
                  "id": "q-sh-002",
                  "test_id": "test-shoulder-mobility",
                  "question_text": "Shoulder flexion range of motion - Left (degrees)",
                  "question_type": "numeric",
                  "is_required": true,
                  "display_order": 2,
                  "help_text": "Measure active shoulder flexion using goniometer",
                  "validation_rules": {
                    "required": true,
                    "min": 0,
                    "max": 180,
                    "unit": "degrees"
                  },
                  "metadata": {
                    "body_region": "upper_body",
                    "movement_type": "flexion",
                    "test_side": "left"
                  },
                  "response": {
                    "id": "resp-sh-002",
                    "question_id": "q-sh-002",
                    "test_result_id": "tr-004-shoulder-mob",
                    "response": 175,
                    "created_at": "2025-10-23T09:39:00Z",
                    "updated_at": "2025-10-23T09:39:00Z"
                  }
                },
                {
                  "id": "q-sh-003",
                  "test_id": "test-shoulder-mobility",
                  "question_text": "Pain level during movement",
                  "question_type": "scale_severity",
                  "is_required": true,
                  "display_order": 3,
                  "help_text": "Rate pain during shoulder flexion (0 = no pain, 10 = severe pain)",
                  "options": [
                    {
                      "value": 0,
                      "label": "No pain"
                    },
                    {
                      "value": 1,
                      "label": "Minimal"
                    },
                    {
                      "value": 2,
                      "label": "Minimal"
                    },
                    {
                      "value": 3,
                      "label": "Mild"
                    },
                    {
                      "value": 4,
                      "label": "Mild"
                    },
                    {
                      "value": 5,
                      "label": "Moderate"
                    },
                    {
                      "value": 6,
                      "label": "Moderate"
                    },
                    {
                      "value": 7,
                      "label": "Severe"
                    },
                    {
                      "value": 8,
                      "label": "Severe"
                    },
                    {
                      "value": 9,
                      "label": "Very severe"
                    },
                    {
                      "value": 10,
                      "label": "Worst possible"
                    }
                  ],
                  "validation_rules": {
                    "required": true,
                    "min": 0,
                    "max": 10
                  },
                  "metadata": {
                    "scale_type": "pain"
                  },
                  "response": {
                    "id": "resp-sh-003",
                    "question_id": "q-sh-003",
                    "test_result_id": "tr-004-shoulder-mob",
                    "response": 2,
                    "created_at": "2025-10-23T09:40:00Z",
                    "updated_at": "2025-10-23T09:40:00Z"
                  }
                },
                {
                  "id": "q-sh-004",
                  "test_id": "test-shoulder-mobility",
                  "question_text": "Quality of movement",
                  "question_type": "select",
                  "is_required": true,
                  "display_order": 4,
                  "help_text": "Assess the overall quality of the shoulder flexion movement",
                  "options": [
                    {
                      "value": "smooth",
                      "label": "Smooth and controlled"
                    },
                    {
                      "value": "hesitant",
                      "label": "Hesitant but controlled"
                    },
                    {
                      "value": "compensated",
                      "label": "Movement with compensations"
                    },
                    {
                      "value": "restricted",
                      "label": "Significantly restricted"
                    }
                  ],
                  "validation_rules": {
                    "required": true,
                    "enum": [
                      "smooth",
                      "hesitant",
                      "compensated",
                      "restricted"
                    ]
                  },
                  "metadata": {
                    "assessment_type": "qualitative"
                  },
                  "response": {
                    "id": "resp-sh-004",
                    "question_id": "q-sh-004",
                    "test_result_id": "tr-004-shoulder-mob",
                    "response": "compensated",
                    "created_at": "2025-10-23T09:41:00Z",
                    "updated_at": "2025-10-23T09:41:00Z"
                  }
                },
                {
                  "id": "q-sh-005",
                  "test_id": "test-shoulder-mobility",
                  "question_text": "Clinical notes",
                  "question_type": "textarea",
                  "is_required": false,
                  "display_order": 5,
                  "help_text": "Additional observations about shoulder mobility",
                  "validation_rules": {
                    "max_length": 1000
                  },
                  "metadata": {
                    "field_type": "notes"
                  },
                  "response": {
                    "id": "resp-sh-005",
                    "question_id": "q-sh-005",
                    "test_result_id": "tr-004-shoulder-mob",
                    "response": "Patient reports mild discomfort in right shoulder at end range. Notable scapular winging on right side. Recommend rotator cuff strengthening and scapular stabilization exercises.",
                    "created_at": "2025-10-23T09:42:00Z",
                    "updated_at": "2025-10-23T09:42:00Z"
                  }
                }
              ],
              "media_files": [
                {
                  "id": "media-sh-001",
                  "test_result_id": "tr-004-shoulder-mob",
                  "file_type": "image",
                  "file_url": "https://storage.example.com/assessments/a1b2c3d4/shoulder-rom-measurement.jpg",
                  "thumbnail_url": "https://storage.example.com/assessments/a1b2c3d4/shoulder-rom-measurement-thumb.jpg",
                  "file_size_bytes": 2097152,
                  "view_angle": "lateral",
                  "caption": "Goniometer measurement - Right shoulder flexion",
                  "created_at": "2025-10-23T09:38:30Z",
                  "metadata": {
                    "resolution": "3024x4032",
                    "format": "jpeg"
                  }
                }
              ]
            }
          ],
          "summary": {
            "total_tests": 4,
            "completed_tests": 4,
            "total_questions": 16,
            "answered_questions": 16,
            "total_media_files": 5,
            "bilateral_comparisons": [
              {
                "test_name": "Single Leg Balance Test",
                "metric": "Balance Duration",
                "left_value": 23,
                "right_value": 40,
                "unit": "seconds",
                "difference": 17,
                "percent_difference": "42.5%",
                "interpretation": "Right leg shows significantly better balance. Consider left leg strengthening."
              },
              {
                "test_name": "Shoulder Mobility Assessment",
                "metric": "Shoulder Flexion ROM",
                "left_value": 175,
                "right_value": 145,
                "unit": "degrees",
                "difference": 30,
                "percent_difference": "17.1%",
                "interpretation": "Right shoulder shows limited ROM. Recommend mobility work and investigation of underlying causes."
              }
            ],
            "key_findings": [
              "Overhead squat shows mild knee valgus and limited ankle mobility",
              "Significant bilateral balance deficit (42.5% difference) favoring right leg",
              "Right shoulder mobility limited to 145 (normal: 170-180)",
              "Minimal pain reported during shoulder movement (2/10)",
              "Multiple compensatory patterns observed during movement screening"
            ],
            "recommendations": [
              "Ankle mobility exercises (calf stretching, dorsiflexion drills)",
              "Hip and glute strengthening to address knee valgus",
              "Left leg balance and stability work",
              "Right shoulder mobility and rotator cuff strengthening",
              "Scapular stabilization exercises",
              "Follow-up assessment in 6-8 weeks to track progress"
            ]
          }
        }
      }
    ],
    "Code in JavaScript": [
      {
        "json": {
          "sessionId": "123432",
          "student_id": "550e8400-e29b-41d4-a716-446655440000",
          "source_assessment_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
          "student_info": {
            "full_name": "Sarah Johnson",
            "email": "sarah.johnson@example.com",
            "date_of_birth": "1992-05-15",
            "gender": "female",
            "fitness_goal": "Improve overall strength and mobility"
          },
          "assessment_metadata": {
            "completed_at": "2025-10-23T09:45:00Z",
            "created_at": "2025-10-23T09:00:00Z",
            "status": "completed"
          },
          "test_results": [
            {
              "id": "tr-001-overhead-squat",
              "test_name": "Overhead Squat Assessment",
              "test_category": "movement_screening",
              "completed_at": "2025-10-23T09:15:00Z",
              "questions": [
                {
                  "question_text": "Does the client's feet turn out during the movement?",
                  "question_type": "binary",
                  "response": true,
                  "help_text": "Observe if feet externally rotate (point outward) during the squat",
                  "metadata": {
                    "body_region": "lower_body",
                    "movement_phase": "descent",
                    "compensation_pattern": "foot_pronation"
                  }
                },
                {
                  "question_text": "Does the client's knees move inward (valgus collapse)?",
                  "question_type": "ternary",
                  "response": "mild",
                  "help_text": "Check for medial knee displacement during squat",
                  "metadata": {
                    "body_region": "lower_body",
                    "movement_phase": "descent",
                    "compensation_pattern": "knee_valgus"
                  }
                },
                {
                  "question_text": "Maximum squat depth achieved (inches from floor to hip joint)",
                  "question_type": "numeric",
                  "response": 18.5,
                  "help_text": "Measure the vertical distance from floor to the greater trochanter at lowest point",
                  "metadata": {
                    "body_region": "lower_body",
                    "movement_phase": "bottom_position",
                    "measurement_type": "depth"
                  }
                },
                {
                  "question_text": "Time to complete 5 repetitions",
                  "question_type": "duration",
                  "response": 45,
                  "help_text": "Record total time for 5 controlled repetitions",
                  "metadata": {
                    "measurement_type": "tempo",
                    "repetitions": 5
                  }
                },
                {
                  "question_text": "Overall movement quality rating",
                  "question_type": "scale_4",
                  "response": "fair",
                  "help_text": "Rate the overall quality of the movement pattern",
                  "metadata": {
                    "assessment_type": "qualitative"
                  }
                },
                {
                  "question_text": "Additional observations or notes",
                  "question_type": "textarea",
                  "response": "Client shows good effort but limited ankle dorsiflexion. Recommend adding ankle mobility work to program. Also noted some upper back rounding during descent.",
                  "help_text": "Record any additional observations, limitations, or concerns",
                  "metadata": {
                    "field_type": "notes"
                  }
                }
              ],
              "media_count": 2
            },
            {
              "id": "tr-002-balance-left",
              "test_name": "Single Leg Balance Test - Left Leg",
              "test_category": "balance",
              "completed_at": "2025-10-23T09:25:00Z",
              "questions": [
                {
                  "question_text": "Maximum balance time achieved (seconds)",
                  "question_type": "duration",
                  "response": 23,
                  "help_text": "Record how long the client maintained single leg stance without touching down",
                  "metadata": {
                    "measurement_type": "endurance",
                    "test_side": "left"
                  }
                },
                {
                  "question_text": "Compensations observed",
                  "question_type": "multiselect",
                  "response": [
                    "hip_hike",
                    "arm_flailing"
                  ],
                  "help_text": "Select all compensatory movements observed during the test",
                  "metadata": {
                    "assessment_type": "qualitative"
                  }
                }
              ],
              "media_count": 1
            },
            {
              "id": "tr-003-balance-right",
              "test_name": "Single Leg Balance Test - Right Leg",
              "test_category": "balance",
              "completed_at": "2025-10-23T09:32:00Z",
              "questions": [
                {
                  "question_text": "Maximum balance time achieved (seconds)",
                  "question_type": "duration",
                  "response": 40,
                  "help_text": "Record how long the client maintained single leg stance without touching down",
                  "metadata": {
                    "measurement_type": "endurance",
                    "test_side": "right"
                  }
                },
                {
                  "question_text": "Compensations observed",
                  "question_type": "multiselect",
                  "response": [
                    "none"
                  ],
                  "help_text": "Select all compensatory movements observed during the test",
                  "metadata": {
                    "assessment_type": "qualitative"
                  }
                }
              ],
              "media_count": 1
            },
            {
              "id": "tr-004-shoulder-mob",
              "test_name": "Shoulder Mobility Assessment",
              "test_category": "mobility",
              "completed_at": "2025-10-23T09:42:00Z",
              "questions": [
                {
                  "question_text": "Shoulder flexion range of motion - Right (degrees)",
                  "question_type": "numeric",
                  "response": 145,
                  "help_text": "Measure active shoulder flexion using goniometer",
                  "metadata": {
                    "body_region": "upper_body",
                    "movement_type": "flexion",
                    "test_side": "right"
                  }
                },
                {
                  "question_text": "Shoulder flexion range of motion - Left (degrees)",
                  "question_type": "numeric",
                  "response": 175,
                  "help_text": "Measure active shoulder flexion using goniometer",
                  "metadata": {
                    "body_region": "upper_body",
                    "movement_type": "flexion",
                    "test_side": "left"
                  }
                },
                {
                  "question_text": "Pain level during movement",
                  "question_type": "scale_severity",
                  "response": 2,
                  "help_text": "Rate pain during shoulder flexion (0 = no pain, 10 = severe pain)",
                  "metadata": {
                    "scale_type": "pain"
                  }
                },
                {
                  "question_text": "Quality of movement",
                  "question_type": "select",
                  "response": "compensated",
                  "help_text": "Assess the overall quality of the shoulder flexion movement",
                  "metadata": {
                    "assessment_type": "qualitative"
                  }
                },
                {
                  "question_text": "Clinical notes",
                  "question_type": "textarea",
                  "response": "Patient reports mild discomfort in right shoulder at end range. Notable scapular winging on right side. Recommend rotator cuff strengthening and scapular stabilization exercises.",
                  "help_text": "Additional observations about shoulder mobility",
                  "metadata": {
                    "field_type": "notes"
                  }
                }
              ],
              "media_count": 1
            }
          ],
          "summary": {
            "total_tests": 4,
            "completed_tests": 4,
            "bilateral_comparisons": [
              {
                "test_name": "Single Leg Balance Test",
                "metric": "Balance Duration",
                "left_value": 23,
                "right_value": 40,
                "unit": "seconds",
                "difference": 17,
                "percent_difference": "42.5%",
                "interpretation": "Right leg shows significantly better balance. Consider left leg strengthening."
              },
              {
                "test_name": "Shoulder Mobility Assessment",
                "metric": "Shoulder Flexion ROM",
                "left_value": 175,
                "right_value": 145,
                "unit": "degrees",
                "difference": 30,
                "percent_difference": "17.1%",
                "interpretation": "Right shoulder shows limited ROM. Recommend mobility work and investigation of underlying causes."
              }
            ],
            "key_findings": [
              "Overhead squat shows mild knee valgus and limited ankle mobility",
              "Significant bilateral balance deficit (42.5% difference) favoring right leg",
              "Right shoulder mobility limited to 145 (normal: 170-180)",
              "Minimal pain reported during shoulder movement (2/10)",
              "Multiple compensatory patterns observed during movement screening"
            ],
            "recommendations": [
              "Ankle mobility exercises (calf stretching, dorsiflexion drills)",
              "Hip and glute strengthening to address knee valgus",
              "Left leg balance and stability work",
              "Right shoulder mobility and rotator cuff strengthening",
              "Scapular stabilization exercises",
              "Follow-up assessment in 6-8 weeks to track progress"
            ]
          }
        }
      }
    ]
  },
  "versionId": "6a87214e-c08b-43ac-a470-9b3123ec7563",
  "triggerCount": 0,
  "shared": [
    {
      "createdAt": "2025-10-24T06:45:16.613Z",
      "updatedAt": "2025-10-24T06:45:16.613Z",
      "role": "workflow:owner",
      "workflowId": "HtrlnGdyQDgQ4PxM",
      "projectId": "nnULjHyqOVknXpmc"
    }
  ],
  "tags": []
}