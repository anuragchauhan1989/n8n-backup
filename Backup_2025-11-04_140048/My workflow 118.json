{
  "createdAt": "2025-11-04T07:39:09.029Z",
  "updatedAt": "2025-11-04T08:01:30.000Z",
  "id": "lXdghcq8UzmJhUys",
  "name": "My workflow 118",
  "active": false,
  "isArchived": true,
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "apply-jobs",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "732fbb09-c726-4de5-ac6c-116aef7b7d81",
      "name": "Webhook Trigger",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        -1104,
        240
      ],
      "webhookId": "18c929bd-5e7e-4210-a920-f245b162893a"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "8773d893-0ce6-46ac-b86f-039e288645de",
              "leftValue": "={{ $json.body }}",
              "rightValue": "",
              "operator": {
                "type": "object",
                "operation": "notEmpty",
                "singleValue": true
              }
            },
            {
              "id": "1a5ace4e-834e-4f9c-9028-c47c34af08a9",
              "leftValue": "={{ $binary }}",
              "rightValue": "",
              "operator": {
                "type": "object",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -880,
        240
      ],
      "id": "8a6e0ed1-642b-49d5-ae47-75a689cdc4a6",
      "name": "If"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        -656,
        320
      ],
      "id": "be6e98c2-e886-408f-9a1b-88de3afb58e2",
      "name": "Respond to Webhook"
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1NA7L-IvLJ7Vk9QrWFw_pmtuVz22s4qAIzwv9benrrGE",
          "mode": "list",
          "cachedResultName": "JD",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1NA7L-IvLJ7Vk9QrWFw_pmtuVz22s4qAIzwv9benrrGE/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1NA7L-IvLJ7Vk9QrWFw_pmtuVz22s4qAIzwv9benrrGE/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "S.N.": "={{ $('Get Current Row Count').item.json.serial_number }}",
            "First Name": "={{ $json.body['first-name'] }}",
            "Last Name": "={{ $json.body['last-name'] }}",
            "Email": "={{ $json.body.email }}",
            "location": "={{ $json.body.location }}",
            "role": "={{ $json.body.role }}",
            "linkedin": "={{ $json.body.linkedin }}",
            "Resume": "={{ $json.resume_view_link }}",
            "phone": "='{{ $json.body['country-code'] }} {{ $json.body.phone }}",
            "Cover Letter": "={{ $json.cover_letter_view_link }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "S.N.",
              "displayName": "S.N.",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "First Name",
              "displayName": "First Name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Last Name",
              "displayName": "Last Name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "phone",
              "displayName": "phone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "role",
              "displayName": "role",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "location",
              "displayName": "location",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "linkedin",
              "displayName": "linkedin",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Email",
              "displayName": "Email",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Resume",
              "displayName": "Resume",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Cover Letter",
              "displayName": "Cover Letter",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1248,
        112
      ],
      "id": "5aad1b86-9504-4072-84a0-01e81174ecb4",
      "name": "Append row in sheet",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ZG1MR4HwHasbUvb4",
          "name": "Cognigenai Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "operation": "readRows",
        "documentId": {
          "__rl": true,
          "value": "1NA7L-IvLJ7Vk9QrWFw_pmtuVz22s4qAIzwv9benrrGE",
          "mode": "list",
          "cachedResultName": "JD",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1NA7L-IvLJ7Vk9QrWFw_pmtuVz22s4qAIzwv9benrrGE/edit?usp=drivesdk"
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        640,
        112
      ],
      "id": "7b982f56-2645-4674-97c6-f692dc8a5f94",
      "name": "Read Current Rows",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ZG1MR4HwHasbUvb4",
          "name": "Cognigenai Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Get all rows from the previous node\nconst allRows = $input.all();\n\n// If no rows exist, start with 1\nif (allRows.length === 0) {\n  return {\n    json: {\n      serial_number: 1\n    }\n  };\n}\n\n// Find the maximum row_number\nconst maxRowNumber = Math.max(...allRows.map(item => item.json.row_number || 0));\n\n// Calculate next serial number (max row_number)\n// Since row_number includes header (row 1), the S.N. = row_number - 1\n// For next entry: if max row_number is 3, next will be 4, so S.N. = 3\nconst nextSerialNumber = maxRowNumber;\n\nreturn {\n  json: {\n    serial_number: nextSerialNumber\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        848,
        112
      ],
      "id": "b2a424ca-8c27-4c35-bd21-b693f12b1d02",
      "name": "Get Current Row Count"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Generate a professional thank you message for a job application submission with the following details:\n\nCandidate Name: {{ $('Append row in sheet').item.json[\"First Name\"] }} {{ $('Append row in sheet').item.json[\"Last Name\"] }}\nPosition Applied: {{ $('Append row in sheet').item.json.role }}\nCompany: Optimal Portfolio\n\nRequirements:\n- Address the candidate by first name\n- Mention the specific position they applied for\n- Confirm successful application receipt\n- Mention that the team will review within 5-7 business days\n- Keep it warm, professional, and concise (50-80 words)\n- End with appreciation and company name\n\nFormat: Webhook response message (plain text, no HTML)",
        "options": {
          "systemMessage": "You are a professional HR communication assistant for Optimal Portfolio. Generate warm, concise, and professional thank you messages for job application submissions. Keep messages brief (50-80 words), personalized, and suitable for immediate webhook responses."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        1584,
        112
      ],
      "id": "85a8998b-a7c3-458e-ab72-ccd90d11a88f",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "resource": "folder",
        "name": "={{ $json.body[\"first-name\"] }}_{{ $json.body[\"last-name\"] }}",
        "driveId": {
          "__rl": true,
          "value": "My Drive",
          "mode": "list",
          "cachedResultName": "My Drive",
          "cachedResultUrl": "https://drive.google.com/drive/my-drive"
        },
        "folderId": {
          "__rl": true,
          "value": "13wVprQw08fE3Q6ZxhE4gJC-UGTeVUKbk",
          "mode": "list",
          "cachedResultName": "Careers ",
          "cachedResultUrl": "https://drive.google.com/drive/folders/13wVprQw08fE3Q6ZxhE4gJC-UGTeVUKbk"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        -656,
        128
      ],
      "id": "c43746ca-b6cd-407f-8bc2-a8b1288fedd7",
      "name": "Create folder for resume"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        1936,
        112
      ],
      "id": "2b8bab42-f6b8-4cd1-801e-d5d82f98a3f5",
      "name": "Respond to Webhook1"
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1.1,
      "position": [
        1584,
        320
      ],
      "id": "2f1e5cfd-41c6-4311-b27e-1538c8be733b",
      "name": "Google Gemini Chat Model",
      "credentials": {}
    },
    {
      "parameters": {
        "name": "={{ $('Create folder for resume').item.json.name }}_resume.pdf",
        "driveId": {
          "__rl": true,
          "value": "My Drive",
          "mode": "list",
          "cachedResultName": "My Drive",
          "cachedResultUrl": "https://drive.google.com/drive/my-drive"
        },
        "folderId": {
          "__rl": true,
          "value": "={{ $json.id }}",
          "mode": "id"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        0,
        0
      ],
      "id": "46d2cf0a-a51b-40eb-8f60-e1b51e3eb146",
      "name": "Upload Resume"
    },
    {
      "parameters": {
        "name": "={{ $('Create folder for resume').item.json.name }}_cover_letter.pdf",
        "driveId": {
          "__rl": true,
          "value": "My Drive",
          "mode": "list",
          "cachedResultName": "My Drive",
          "cachedResultUrl": "https://drive.google.com/drive/my-drive"
        },
        "folderId": {
          "__rl": true,
          "value": "={{ $('Get Drive folder and File').item.json.id }}",
          "mode": "id"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        0,
        352
      ],
      "id": "3817b471-77a1-4d14-bd55-c2bbea643efe",
      "name": "Upload Cover file"
    },
    {
      "parameters": {
        "mode": "combine",
        "combineBy": "combineByPosition",
        "options": {}
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3,
      "position": [
        320,
        128
      ],
      "id": "f1d6faa0-5438-475d-8515-abfb325946f2",
      "name": "Merge"
    },
    {
      "parameters": {
        "jsCode": "// Get the uploaded file details from Google Drive\nconst uploadedFile = $input.item.json;\n\n// Create a shareable link (view only)\nconst fileId = uploadedFile.id;\nconst viewLink = `https://drive.google.com/file/d/${fileId}/view`;\n\n// Return the link\nreturn {\n  json: {\n    resume_view_link: viewLink\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        160,
        0
      ],
      "id": "7e6960d9-66e3-4152-a7a5-525f9fa72018",
      "name": "Set Resume Link"
    },
    {
      "parameters": {
        "jsCode": "// Get the uploaded file details from Google Drive\nconst uploadedFile = $input.item.json;\n\n// Create a shareable link (view only)\nconst fileId = uploadedFile.id;\nconst viewLink = `https://drive.google.com/file/d/${fileId}/view`;\n\n// Return the link\nreturn {\n  json: {\n    cover_letter_view_link: viewLink\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        160,
        352
      ],
      "id": "2ae2f011-e302-4ae2-9e28-1f18a780ebdb",
      "name": "Set Cover Link"
    },
    {
      "parameters": {
        "mode": "combine",
        "combineBy": "combineByPosition",
        "options": {}
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3,
      "position": [
        480,
        112
      ],
      "id": "2ea1bcf7-ab33-459a-a1e9-d33356d1722b",
      "name": "Merge data"
    },
    {
      "parameters": {
        "operation": "get"
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        -416,
        128
      ],
      "id": "ccb38094-d712-4728-9f75-55ab271b740e",
      "name": "Get Drive folder and File"
    },
    {
      "parameters": {
        "text": "=:wave: New Job Application Received!\n\n*Candidate Details:*\n• Name: {{ $('Append row in sheet').item.json[\"First Name\"] }} {{ $('Append row in sheet').item.json[\"Last Name\"] }}\n• Email: {{ $('Append row in sheet').item.json.Email }}\n• Phone: {{ $('Append row in sheet').item.json.phone }}\n• Location: {{ $('Append row in sheet').item.json.location }}\n• Position: {{ $('Append row in sheet').item.json.role }}\n• LinkedIn: {{ $('Append row in sheet').item.json.linkedin }}\n\n*Documents:*\n• Resume: {{ $('Append row in sheet').item.json.Resume }}\n• Cover Letter: {{ $('Append row in sheet').item.json[\"Cover Letter\"] }}\n\n---\n_Application logged in Google Sheets_ :white_check_mark:",
        "otherOptions": {}
      },
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2.2,
      "position": [
        1440,
        112
      ],
      "id": "e9a2ee62-b19a-476b-89f4-755f999839a7",
      "name": "Send a message",
      "webhookId": "1bb8a78d-2eda-4d13-88c1-f5100adf1c1b"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "a2bda9d9-7a65-4a72-a2e9-23aa3bf77f51",
              "leftValue": "={{ $json.body['cover-letter'] }}",
              "rightValue": "",
              "operator": {
                "type": "object",
                "operation": "notEmpty",
                "singleValue": true
              }
            },
            {
              "id": "9d45e48b-ee81-4755-a25f-45ef1e6fd9b4",
              "leftValue": "={{ $binary['cover-letter'] }}",
              "rightValue": "",
              "operator": {
                "type": "object",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -224,
        256
      ],
      "id": "458d9889-d404-479b-8441-714e31daeeab",
      "name": "If1"
    }
  ],
  "connections": {
    "Webhook Trigger": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "Create folder for resume",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Read Current Rows": {
      "main": [
        [
          {
            "node": "Get Current Row Count",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Current Row Count": {
      "main": [
        [
          {
            "node": "Append row in sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Append row in sheet": {
      "main": [
        [
          {
            "node": "Send a message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Respond to Webhook1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create folder for resume": {
      "main": [
        [
          {
            "node": "Get Drive folder and File",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Upload Resume": {
      "main": [
        [
          {
            "node": "Set Resume Link",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Upload Cover file": {
      "main": [
        [
          {
            "node": "Set Cover Link",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge": {
      "main": [
        [
          {
            "node": "Merge data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge data": {
      "main": [
        [
          {
            "node": "Read Current Rows",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Resume Link": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Drive folder and File": {
      "main": [
        [
          {
            "node": "Upload Resume",
            "type": "main",
            "index": 0
          },
          {
            "node": "Merge",
            "type": "main",
            "index": 1
          },
          {
            "node": "If1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a message": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If1": {
      "main": [
        [
          {
            "node": "Upload Cover file",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "meta": null,
  "pinData": {
    "Webhook Trigger": [
      {
        "json": {
          "headers": {
            "host": "optimalportfolio.app.n8n.cloud",
            "user-agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36",
            "content-length": "236761",
            "accept": "*/*",
            "accept-encoding": "gzip, br",
            "accept-language": "en-US,en;q=0.9",
            "cdn-loop": "cloudflare; loops=1; subreqs=1",
            "cf-connecting-ip": "2405:201:4025:9158:cff:7d7e:df26:59d0",
            "cf-ew-via": "15",
            "cf-ipcountry": "IN",
            "cf-ray": "99920f2de0be3f74-SIN",
            "cf-visitor": "{\"scheme\":\"https\"}",
            "cf-worker": "n8n.cloud",
            "content-type": "multipart/form-data; boundary=----WebKitFormBoundaryxuxnDwuQcA2MxMdO",
            "origin": "https://optimalportfol.io",
            "priority": "u=1, i",
            "referer": "https://optimalportfol.io/Company/join-us/apply",
            "sec-ch-ua": "\"Google Chrome\";v=\"141\", \"Not?A_Brand\";v=\"8\", \"Chromium\";v=\"141\"",
            "sec-ch-ua-mobile": "?0",
            "sec-ch-ua-platform": "\"Windows\"",
            "sec-fetch-dest": "empty",
            "sec-fetch-mode": "cors",
            "sec-fetch-site": "cross-site",
            "x-forwarded-for": "2405:201:4025:9158:cff:7d7e:df26:59d0, 162.158.189.4",
            "x-forwarded-host": "optimalportfolio.app.n8n.cloud",
            "x-forwarded-port": "443",
            "x-forwarded-proto": "https",
            "x-forwarded-server": "traefik-prod-users-gwc-76-b4b8c88f-4qhr7",
            "x-is-trusted": "yes",
            "x-real-ip": "2405:201:4025:9158:cff:7d7e:df26:59d0"
          },
          "params": {},
          "query": {},
          "body": {
            "first-name": "Abhishek",
            "last-name": "Gupta",
            "email": "test@gmail.com",
            "country-code": "+61",
            "phone": "5858598598598",
            "location": "Delhi",
            "role": "VP Sales",
            "linkedin": "https://www.linkedin.com/in/abhishek-gupta-38b29658/",
            "work-preference": "remote"
          },
          "webhookUrl": "https://optimalportfolio.app.n8n.cloud/webhook/apply-jobs",
          "executionMode": "production"
        },
        "binary": {
          "resume": {
            "mimeType": "application/pdf",
            "fileType": "pdf",
            "fileExtension": "pdf",
            "data": "filesystem-v2",
            "fileName": "Target Operating Model.pdf",
            "id": "filesystem-v2:workflows/PK0NxCGZtGiycj6c/executions/temp/binary_data/e5bca708-7870-4659-b577-c6eefd32c8b4",
            "fileSize": "236 kB"
          }
        }
      }
    ]
  },
  "versionId": "c4f03aa3-e993-40c2-9514-6c2d6864e505",
  "triggerCount": 0,
  "shared": [
    {
      "createdAt": "2025-11-04T07:39:09.047Z",
      "updatedAt": "2025-11-04T07:39:09.047Z",
      "role": "workflow:owner",
      "workflowId": "lXdghcq8UzmJhUys",
      "projectId": "nnULjHyqOVknXpmc"
    }
  ],
  "tags": []
}