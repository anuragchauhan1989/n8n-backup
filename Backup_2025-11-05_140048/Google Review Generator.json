{
  "createdAt": "2025-10-13T10:02:53.350Z",
  "updatedAt": "2025-10-15T12:32:05.000Z",
  "id": "KOLm28uGd6vPC44n",
  "name": "Google Review Generator",
  "active": false,
  "isArchived": true,
  "nodes": [
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        -368,
        84
      ],
      "id": "d2904571-8f51-4ce9-85c2-9caa00ba4f17",
      "name": "When clicking 'Execute workflow'"
    },
    {
      "parameters": {
        "base": {
          "__rl": true,
          "value": "appeSs9tysGPGRNNF",
          "mode": "list",
          "cachedResultName": "Instagram Reel Scraper",
          "cachedResultUrl": "https://airtable.com/appeSs9tysGPGRNNF"
        },
        "table": {
          "__rl": true,
          "value": "tblCimLI3VYKUhPuA",
          "mode": "list",
          "cachedResultName": "Google Reviews Sample Data",
          "cachedResultUrl": "https://airtable.com/appeSs9tysGPGRNNF/tblCimLI3VYKUhPuA"
        },
        "id": "=",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        -144,
        84
      ],
      "id": "7651f56e-a623-46dd-a6a1-29c9aef54dae",
      "name": "Get a record",
      "credentials": {
        "airtableTokenApi": {
          "id": "15qEGjBO5wP9YFX7",
          "name": "Airtable Personal Access Token account"
        }
      }
    },
    {
      "parameters": {
        "fieldToSplitOut": "=records",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        80,
        84
      ],
      "id": "a5900e5f-00d0-41b9-a3ab-0f87bb1a5575",
      "name": "Split Out"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        536,
        408
      ],
      "id": "f6282aff-9f65-4855-b872-42649832785d",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "13GUWdzP5u5goYYi",
          "name": "Google Gemini(PaLM) Api account - Ansh"
        }
      }
    },
    {
      "parameters": {
        "operation": "sendAndWait",
        "select": "channel",
        "channelId": {
          "__rl": true,
          "mode": "list",
          "value": "C09EC9AJ9PB",
          "cachedResultName": "bring-human-in-loop"
        },
        "message": "={{ $json.message }}",
        "options": {}
      },
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2.3,
      "position": [
        1104,
        -112
      ],
      "id": "1b001781-8737-4507-85e8-395683b57191",
      "name": "Send message and wait for response",
      "webhookId": "9b84a46d-03e5-460d-bb7b-8f7cacc9846f",
      "credentials": {
        "slackApi": {
          "id": "Ks9mI1D2tUwqdx44",
          "name": "Slack account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "appeSs9tysGPGRNNF",
          "mode": "list",
          "cachedResultName": "Instagram Reel Scraper",
          "cachedResultUrl": "https://airtable.com/appeSs9tysGPGRNNF"
        },
        "table": {
          "__rl": true,
          "value": "tblCimLI3VYKUhPuA",
          "mode": "list",
          "cachedResultName": "Google Reviews Sample Data",
          "cachedResultUrl": "https://airtable.com/appeSs9tysGPGRNNF/tblCimLI3VYKUhPuA"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Review Replied": "Review done",
            "Reviewer Name": "={{ $('Get a record').item.json.records[0].fields[\"Reviewer Name\"] }}"
          },
          "matchingColumns": [
            "Reviewer Name"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Review Title",
              "displayName": "Review Title",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Reviewer Name",
              "displayName": "Reviewer Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Review Text",
              "displayName": "Review Text",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Rating",
              "displayName": "Rating",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Review Date",
              "displayName": "Review Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Sentiment (AI)",
              "displayName": "Sentiment (AI)",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Attachment",
              "displayName": "Attachment",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "AI Image (Web Search)",
              "displayName": "AI Image (Web Search)",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Review Replied",
              "displayName": "Review Replied",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1552,
        -112
      ],
      "id": "ceb30719-e270-4cad-aaf4-60062eff6119",
      "name": "Update record",
      "credentials": {
        "airtableTokenApi": {
          "id": "15qEGjBO5wP9YFX7",
          "name": "Airtable Personal Access Token account"
        }
      }
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "sessionData",
        "contextWindowLength": 10
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        664,
        408
      ],
      "id": "8e8243d5-6081-49f8-8202-8624987164a4",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Review data: {{ JSON.stringify($json.fields) }}",
        "options": {
          "systemMessage": "=You are Anurag, an automation expert specializing in n8n, Playwright, and Comm100. \nYour task is to generate personalized replies for each Google review below. \n\nInstructions:\n- Thank each reviewer by name.\n- Acknowledge their specific feedback.\n- For 5-star reviews: express gratitude and reinforce your commitment to quality.\n- For 4-star reviews: thank them, acknowledge the positive experience, and subtly mention openness to improve further.\n- Keep replies 2‚Äì3 sentences long, friendly, and professional.\n- Avoid repeating phrases across responses.\n\nReviews Dataset:\nReviewer Name: Priya Sharma\nRating: ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê\nReview: Anurag is incredibly skilled at automation workflows. He helped me integrate n8n with my CRM, and everything runs smoothly now. Highly recommend him for any automation project!\nDate: Oct 8, 2025\n\nReviewer Name: Rohit Mehta\nRating: ‚≠ê‚≠ê‚≠ê‚≠ê\nReview: Great experience working with Anurag. He understands business logic well and translates it into effective automation solutions. A minor delay in delivery, but overall excellent quality.\nDate: Oct 5, 2025\n\nReviewer Name: Sarah Johnson\nRating: ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê\nReview: Professional, responsive, and detail-oriented! Anurag built a Playwright testing framework for our team ‚Äî it saved us hours every week. Would gladly work with him again.\nDate: Sep 30, 2025\n\nReviewer Name: Deepak Yadav\nRating: ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê\nReview: Anurag has deep knowledge of APIs and automation tools like n8n and Comm100. He quickly fixed our chatbot distribution issues and explained everything clearly.\nDate: Sep 27, 2025\n\nReviewer Name: Elena Rossi\nRating: ‚≠ê‚≠ê‚≠ê‚≠ê\nReview: Very satisfied with the support and communication. Anurag's automation workflow helped us process data between Google Sheets and Slack seamlessly. A few minor tweaks were needed, but overall great work.\nDate: Sep 18, 2025\n\nOutput Format:\nid:  {{ $json.id }}\nReviewer Name | Reply\nPriya Sharma | ‚Ä¶\nRohit Mehta | ‚Ä¶\nSarah Johnson | ‚Ä¶\nDeepak Yadav | ‚Ä¶\nElena Rossi | ‚Ä¶\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        528,
        184
      ],
      "id": "e7b301e9-0a4e-458f-b70c-78f46305f0cb",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        304,
        84
      ],
      "id": "36e3feb4-06cf-4a35-8f5c-a78b26b33d28",
      "name": "Loop Over Items"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        1328,
        -112
      ],
      "id": "5e2f521a-62d8-4276-add5-99921247925c",
      "name": "Second Loop"
    },
    {
      "parameters": {
        "aggregate": "aggregateAllItemData",
        "options": {}
      },
      "id": "aggregate-reviews-node",
      "name": "Aggregate All Reviews",
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        592,
        -112
      ]
    },
    {
      "parameters": {
        "jsCode": "const allReviews = [];\nfor (const item of $input.all()) {\n  if (item.json.output) {\n    allReviews.push({\n      reviewer: item.json.fields['Reviewer Name'],\n      rating: item.json.fields['Rating'],\n      reply: item.json.output\n    });\n  }\n}\nlet message = 'üìù **Generated Review Replies for Approval**\\n\\n';\nallReviews.forEach((review, index) => {\n  const stars = '‚≠ê'.repeat(review.rating || 0);\n  message += `**${index + 1}. ${review.reviewer}** (${stars})\\n${review.reply}\\n\\n`;\n});\nmessage += '\\n‚úÖ Reply \"approve\" to update all reviews in Airtable';\nreturn [{ json: { message: message, reviews: allReviews } }];"
      },
      "id": "format-all-reviews",
      "name": "Format All Reviews",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        880,
        -112
      ]
    }
  ],
  "connections": {
    "When clicking 'Execute workflow'": {
      "main": [
        [
          {
            "node": "Get a record",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get a record": {
      "main": [
        [
          {
            "node": "Split Out",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "main": [
        []
      ],
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Send message and wait for response": {
      "main": [
        [
          {
            "node": "Second Loop",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update record": {
      "main": [
        [
          {
            "node": "Second Loop",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "main": [
        []
      ],
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [
          {
            "node": "Aggregate All Reviews",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Second Loop": {
      "main": [
        [],
        [
          {
            "node": "Update record",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate All Reviews": {
      "main": [
        [
          {
            "node": "Format All Reviews",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Format All Reviews": {
      "main": [
        [
          {
            "node": "Send message and wait for response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1",
    "saveDataErrorExecution": "all",
    "saveDataSuccessExecution": "all",
    "saveManualExecutions": true,
    "saveExecutionProgress": true
  },
  "staticData": null,
  "meta": null,
  "pinData": {},
  "versionId": "b3002f1e-6cec-499a-904c-41d7917dbe08",
  "triggerCount": 0,
  "shared": [
    {
      "createdAt": "2025-10-13T10:02:53.354Z",
      "updatedAt": "2025-10-13T10:02:53.354Z",
      "role": "workflow:owner",
      "workflowId": "KOLm28uGd6vPC44n",
      "projectId": "nnULjHyqOVknXpmc"
    }
  ],
  "tags": []
}