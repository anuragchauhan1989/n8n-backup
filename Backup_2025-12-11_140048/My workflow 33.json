{
  "createdAt": "2025-10-13T10:02:15.630Z",
  "updatedAt": "2025-10-14T19:44:19.000Z",
  "id": "m9KXLjMcu34pLLnc",
  "name": "My workflow 33",
  "active": false,
  "isArchived": true,
  "nodes": [
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        -368,
        84
      ],
      "id": "6f36bb9b-36dc-4afa-8ca2-22bf58e156ae",
      "name": "When clicking 'Execute workflow'"
    },
    {
      "parameters": {
        "base": {
          "__rl": true,
          "value": "appeSs9tysGPGRNNF",
          "mode": "list",
          "cachedResultName": "Instagram Reel Scraper",
          "cachedResultUrl": "https://airtable.com/appeSs9tysGPGRNNF"
        },
        "table": {
          "__rl": true,
          "value": "tblCimLI3VYKUhPuA",
          "mode": "list",
          "cachedResultName": "Google Reviews Sample Data",
          "cachedResultUrl": "https://airtable.com/appeSs9tysGPGRNNF/tblCimLI3VYKUhPuA"
        },
        "id": "=",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        -144,
        84
      ],
      "id": "1ee76832-4a3f-4c95-be86-ec08ce21d862",
      "name": "Get a record",
      "credentials": {
        "airtableTokenApi": {
          "id": "15qEGjBO5wP9YFX7",
          "name": "Airtable Personal Access Token account"
        }
      }
    },
    {
      "parameters": {
        "fieldToSplitOut": "=records",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        80,
        84
      ],
      "id": "4cb58228-8e05-4d3a-a3a9-5ad80304192b",
      "name": "Split Out"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        536,
        408
      ],
      "id": "0cf52d54-73f1-46e4-b818-b48333a8f083",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "13GUWdzP5u5goYYi",
          "name": "Google Gemini(PaLM) Api account - Ansh"
        }
      }
    },
    {
      "parameters": {
        "operation": "sendAndWait",
        "select": "channel",
        "channelId": {
          "__rl": true,
          "mode": "list",
          "value": "C09EC9AJ9PB",
          "cachedResultName": "bring-human-in-loop"
        },
        "message": "={{ $json.message }}",
        "options": {}
      },
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2.3,
      "position": [
        1104,
        -112
      ],
      "id": "fea9335f-dcd0-4d10-a0a2-46ae2366fcdb",
      "name": "Send message and wait for response",
      "webhookId": "2204b7af-a57f-4216-8f81-9d18cab9204c",
      "credentials": {
        "slackApi": {
          "id": "Ks9mI1D2tUwqdx44",
          "name": "Slack account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "appeSs9tysGPGRNNF",
          "mode": "list",
          "cachedResultName": "Instagram Reel Scraper",
          "cachedResultUrl": "https://airtable.com/appeSs9tysGPGRNNF"
        },
        "table": {
          "__rl": true,
          "value": "tblCimLI3VYKUhPuA",
          "mode": "list",
          "cachedResultName": "Google Reviews Sample Data",
          "cachedResultUrl": "https://airtable.com/appeSs9tysGPGRNNF/tblCimLI3VYKUhPuA"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Review Replied": "Review done",
            "Reviewer Name": "={{ $('Get a record').item.json.records[0].fields[\"Reviewer Name\"] }}"
          },
          "matchingColumns": [
            "Reviewer Name"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "Review Title",
              "displayName": "Review Title",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Reviewer Name",
              "displayName": "Reviewer Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Review Text",
              "displayName": "Review Text",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Rating",
              "displayName": "Rating",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Review Date",
              "displayName": "Review Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Sentiment (AI)",
              "displayName": "Sentiment (AI)",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Attachment",
              "displayName": "Attachment",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "AI Image (Web Search)",
              "displayName": "AI Image (Web Search)",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Review Replied",
              "displayName": "Review Replied",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1552,
        -112
      ],
      "id": "b25565d5-e7e4-486c-9cfd-6d64559f1e5b",
      "name": "Update record",
      "credentials": {
        "airtableTokenApi": {
          "id": "15qEGjBO5wP9YFX7",
          "name": "Airtable Personal Access Token account"
        }
      }
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "sessionData",
        "contextWindowLength": 10
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        664,
        408
      ],
      "id": "5bc65256-cc54-4d13-93ca-136f415a938f",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Review data: {{ JSON.stringify($json.fields) }}",
        "options": {
          "systemMessage": "=You are Anurag, an automation expert specializing in n8n, Playwright, and Comm100. \nYour task is to generate personalized replies for each Google review below. \n\nInstructions:\n- Thank each reviewer by name.\n- Acknowledge their specific feedback.\n- For 5-star reviews: express gratitude and reinforce your commitment to quality.\n- For 4-star reviews: thank them, acknowledge the positive experience, and subtly mention openness to improve further.\n- Keep replies 2â€“3 sentences long, friendly, and professional.\n- Avoid repeating phrases across responses.\n\nReviews Dataset:\nReviewer Name: Priya Sharma\nRating: â­â­â­â­â­\nReview: Anurag is incredibly skilled at automation workflows. He helped me integrate n8n with my CRM, and everything runs smoothly now. Highly recommend him for any automation project!\nDate: Oct 8, 2025\n\nReviewer Name: Rohit Mehta\nRating: â­â­â­â­\nReview: Great experience working with Anurag. He understands business logic well and translates it into effective automation solutions. A minor delay in delivery, but overall excellent quality.\nDate: Oct 5, 2025\n\nReviewer Name: Sarah Johnson\nRating: â­â­â­â­â­\nReview: Professional, responsive, and detail-oriented! Anurag built a Playwright testing framework for our team â€” it saved us hours every week. Would gladly work with him again.\nDate: Sep 30, 2025\n\nReviewer Name: Deepak Yadav\nRating: â­â­â­â­â­\nReview: Anurag has deep knowledge of APIs and automation tools like n8n and Comm100. He quickly fixed our chatbot distribution issues and explained everything clearly.\nDate: Sep 27, 2025\n\nReviewer Name: Elena Rossi\nRating: â­â­â­â­\nReview: Very satisfied with the support and communication. Anurag's automation workflow helped us process data between Google Sheets and Slack seamlessly. A few minor tweaks were needed, but overall great work.\nDate: Sep 18, 2025\n\nOutput Format:\nid:  {{ $json.id }}\nReviewer Name | Reply\nPriya Sharma | â€¦\nRohit Mehta | â€¦\nSarah Johnson | â€¦\nDeepak Yadav | â€¦\nElena Rossi | â€¦\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        528,
        184
      ],
      "id": "2d9ef1ee-7f6c-4419-acaa-c06943548b8f",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        304,
        84
      ],
      "id": "9a93ae44-8d35-4cbb-a305-0f70bb18de5d",
      "name": "Loop Over Items"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        1328,
        -112
      ],
      "id": "b204fde5-3ea8-46ae-bc89-24e7ba37c05f",
      "name": "Second Loop"
    },
    {
      "parameters": {
        "aggregate": "aggregateAllItemData",
        "options": {}
      },
      "id": "aggregate-reviews",
      "name": "Aggregate All Reviews",
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        592,
        -112
      ]
    },
    {
      "parameters": {
        "jsCode": "// Collect all AI-generated reviews\nconst allReviews = [];\n\nfor (const item of $input.all()) {\n  if (item.json.output) {\n    allReviews.push({\n      reviewer: item.json.fields['Reviewer Name'],\n      reply: item.json.output\n    });\n  }\n}\n\n// Format into a single message\nlet message = 'ðŸ“ **Generated Review Replies**\\n\\n';\nallReviews.forEach((review, index) => {\n  message += `**${index + 1}. ${review.reviewer}**\\n${review.reply}\\n\\n`;\n});\n\nreturn [{ json: { message: message, reviews: allReviews } }];"
      },
      "id": "format-reviews",
      "name": "Format All Reviews",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        880,
        -112
      ]
    }
  ],
  "connections": {
    "When clicking 'Execute workflow'": {
      "main": [
        [
          {
            "node": "Get a record",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get a record": {
      "main": [
        [
          {
            "node": "Split Out",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "main": [
        []
      ],
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Send message and wait for response": {
      "main": [
        [
          {
            "node": "Second Loop",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update record": {
      "main": [
        [
          {
            "node": "Second Loop",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "main": [
        []
      ],
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          },
          {
            "node": "Aggregate All Reviews",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Second Loop": {
      "main": [
        [],
        [
          {
            "node": "Update record",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate All Reviews": {
      "main": [
        [
          {
            "node": "Format All Reviews",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Format All Reviews": {
      "main": [
        [
          {
            "node": "Send message and wait for response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1",
    "saveDataErrorExecution": "all",
    "saveDataSuccessExecution": "all",
    "saveManualExecutions": true,
    "saveExecutionProgress": true
  },
  "staticData": null,
  "meta": null,
  "pinData": {},
  "versionId": "f667c34d-5601-461a-ad60-9efbff23755d",
  "triggerCount": 0,
  "shared": [
    {
      "createdAt": "2025-10-13T10:02:15.633Z",
      "updatedAt": "2025-10-13T10:02:15.633Z",
      "role": "workflow:owner",
      "workflowId": "m9KXLjMcu34pLLnc",
      "projectId": "nnULjHyqOVknXpmc"
    }
  ],
  "tags": []
}